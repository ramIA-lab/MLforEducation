{
  "hash": "639b7792602701bd3563d100978f3739",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Preparación de los datos para el modelado\"\nauthor: Dante Conti, Sergi Ramirez, (c) IDEAI\ndate: \"2025-09-30\"\ndate-modified: \"2025-09-30\"\ntoc: true\n# language: es\nnumber-sections: true\nformat: \n  html: \n    theme: cerulean\neditor: visual\n#execute: \n#  freeze: auto\n---\n\n\n\n# Descripción del problema\n\nEste conjunto de datos contiene registros de transacciones de cafeterías, incluyendo detalles sobre ventas, tipo de pago, hora de compra y preferencias del cliente.\n\nCon atributos que abarcan la hora del día, los días de la semana, los meses, los tipos de café y los ingresos, este conjunto de datos proporciona una base sólida para analizar el comportamiento del cliente, los patrones de ventas y las tendencias de rendimiento empresarial.\n\nEstructura del conjunto de datos:\n\n-   **hour_of_day**: Hora de compra (0–23)\n-   **cash_type**: Forma de pago (efectivo/tarjeta)\n-   **money**: Importe de la transacción (en moneda local)\n-   **coffee_name**: Tipo de café comprado (p. ej., Latte, Americano, Chocolate caliente)\n-   **Time_of_Day**: Hora de compra (mañana, tarde, noche)\n-   **Weekday**: Día de la semana (p. ej., lun., mar., etc.)\n-   **Month_name**: Mes de compra (p. ej., ene., feb., mar.)\n-   **Weekdaysort**: Representación numérica para ordenar por día de la semana (1 = lun., 7 = dom.)\n-   **Monthsort**: Representación numérica para ordenar por mes (1 = ene., 12 = dic.)\n-   **Date**: Fecha de la transacción (AAAA-MM-DD)\n-   **Time**: Hora exacta de la transacción (HH:MM:SS)\n\nPara hacer la descriptiva, podréis utilizar la siguiente [base de datos](https://www.kaggle.com/datasets/ihelon/coffee-sales).\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n  hour_of_day cash_type money         coffee_name Time_of_Day Weekday\n1          10      card  38.7               Latte     Morning     Fri\n2          12      card  38.7       Hot Chocolate   Afternoon     Fri\n3          12      card  38.7       Hot Chocolate   Afternoon     Fri\n4          13      card  28.9           Americano   Afternoon     Fri\n5          13      card  38.7               Latte   Afternoon     Fri\n6          15      card  33.8 Americano with Milk   Afternoon     Fri\n  Month_name Weekdaysort Monthsort       Date            Time\n1        Mar           5         3 2024-03-01 10:15:50.520000\n2        Mar           5         3 2024-03-01 12:19:22.539000\n3        Mar           5         3 2024-03-01 12:20:18.089000\n4        Mar           5         3 2024-03-01 13:46:33.006000\n5        Mar           5         3 2024-03-01 13:48:14.626000\n6        Mar           5         3 2024-03-01 15:39:47.726000\n```\n\n\n:::\n:::\n\n\n\nA continuación vamos a detectar de que clase es cada una de las variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclases <- sapply(datos, class)\nvarNum <- names(clases)[which(clases %in% c(\"numeric\", \"integer\"))]\nvarCat <- names(clases)[which(clases %in% c(\"character\", \"factor\"))]\n```\n:::\n\n\n\nPara poder realizar una descriptiva correcta, descartaremos las variables `Time` y `Date`.\n\n\n\n::: {.cell}\n\n:::\n\n\n\n# Análisis exploratorio\n\n![](DescriptiveAnalysis.png)\n\n## Análisis exploratorio de una variable\n\n### Numerical\n\n#### Description\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\npsych::describe(datos[, varNum])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n            vars    n  mean   sd median trimmed  mad   min  max range  skew\nhour_of_day    1 3547 14.19 4.23  14.00   14.11 5.93  6.00 22.0 16.00  0.12\nmoney          2 3547 31.65 4.88  32.82   31.98 4.36 18.12 38.7 20.58 -0.54\nWeekdaysort    3 3547  3.85 1.97   4.00    3.81 2.97  1.00  7.0  6.00  0.08\nMonthsort      4 3547  6.45 3.50   7.00    6.42 4.45  1.00 12.0 11.00  0.00\n            kurtosis   se\nhour_of_day    -1.13 0.07\nmoney          -0.67 0.08\nWeekdaysort    -1.23 0.03\nMonthsort      -1.38 0.06\n```\n\n\n:::\n:::\n\n\n\n#### Graphic\n\n::: panel-tabset\n## base\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(2, 4))  \nfor (var in varNum) {\n  hist(datos[, var], main = paste0(\"Histograma variable \", var))\n  boxplot(datos[, var], main = paste0(\"Boxplot variable \", var))\n}\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\npar(mfrow = c(1, 1))  \n```\n:::\n\n\n\n## ggplot2\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.4.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAdjuntando el paquete: 'ggplot2'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:psych':\n\n    %+%, alpha\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(patchwork)\n\nplots <- list()\n\nfor (var in varNum) {\n  \n  histo <- ggplot(datos, aes(x = .data[[var]])) + \n    geom_histogram(aes(y = ..density..), colour = \"black\", fill = \"white\") +\n    geom_density(alpha = .2, fill = \"#FF6666\") +\n    geom_vline(aes(xintercept = mean(.data[[var]], na.rm = TRUE)),\n               color = \"blue\", linetype = \"dashed\", linewidth = 1) +\n    ggtitle(paste(\"Histograma de\", var))\n  \n  boxp <- ggplot(datos, aes(x = .data[[var]])) + \n    geom_boxplot(outlier.colour = \"red\", outlier.shape = 8,\n                 outlier.size = 4) +\n    ggtitle(paste(\"Boxplot de\", var))\n  \n  plots <- append(plots, list(histo, boxp))\n}\n\n# Combinar en un grid automático con 2 columnas\nfinal_plot <- Reduce(`+`, plots) + plot_layout(ncol = 2)\nfinal_plot\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.\nℹ Please use `after_stat(density)` instead.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n\n### Categorical\n\n#### Description\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (var in varCat) {\n  tablaAbs <- data.frame(table(datos[, var]))\n  tablaFreq <- data.frame(table(datos[, var])/sum(table(datos[, var])))\n  m <- match(tablaAbs$Var1, tablaFreq$Var1)\n  tablaAbs[, \"FreqRel\"] <- tablaFreq[m, \"Freq\"]\n  colnames(tablaAbs) <- c(\"Categoria\", \"FreqAbs\", \"FreqRel\")\n  \n  cat(\"===============\", var, \"===================================\\n\")\n  print(tablaAbs)\n  cat(\"==================================================\\n\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=============== cash_type ===================================\n  Categoria FreqAbs FreqRel\n1      card    3547       1\n==================================================\n=============== coffee_name ===================================\n            Categoria FreqAbs    FreqRel\n1           Americano     564 0.15900761\n2 Americano with Milk     809 0.22808007\n3          Cappuccino     486 0.13701720\n4               Cocoa     239 0.06738089\n5             Cortado     287 0.08091345\n6            Espresso     129 0.03636876\n7       Hot Chocolate     276 0.07781224\n8               Latte     757 0.21341979\n==================================================\n=============== Time_of_Day ===================================\n  Categoria FreqAbs   FreqRel\n1 Afternoon    1205 0.3397237\n2   Morning    1181 0.3329574\n3     Night    1161 0.3273189\n==================================================\n=============== Weekday ===================================\n  Categoria FreqAbs   FreqRel\n1       Fri     532 0.1499859\n2       Mon     544 0.1533690\n3       Sat     470 0.1325063\n4       Sun     419 0.1181280\n5       Thu     510 0.1437835\n6       Tue     572 0.1612630\n7       Wed     500 0.1409642\n==================================================\n=============== Month_name ===================================\n   Categoria FreqAbs    FreqRel\n1        Apr     168 0.04736397\n2        Aug     272 0.07668452\n3        Dec     259 0.07301945\n4        Feb     423 0.11925571\n5        Jan     201 0.05666761\n6        Jul     237 0.06681703\n7        Jun     223 0.06287003\n8        Mar     494 0.13927262\n9        May     241 0.06794474\n10       Nov     259 0.07301945\n11       Oct     426 0.12010149\n12       Sep     344 0.09698337\n==================================================\n```\n\n\n:::\n:::\n\n\n\n#### Graphic\n\n::: panel-tabset\n## base\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(2, 3))  \nfor (var in varCat) {\n  barplot(table(datos[, var]))\n}\npar(mfrow = c(1, 1))  \n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n## ggplot2\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(gridExtra)\n\nplots <- list()  # lista vacía\ni <- 1           # índice\n\nfor (var in varCat) {\n  tabla <- data.frame(table(datos[, var]) / sum(table(datos[, var])))\n  \n  p <- ggplot(data = tabla, aes(x = Var1, y = Freq)) +\n        geom_bar(stat = \"identity\", fill = \"steelblue\") +\n        geom_text(aes(label = paste0(round(Freq * 100, 2), \"%\")),\n                  vjust = 1.6, color = \"white\", size = 3.5) +\n        theme_minimal() +\n        labs(title = paste(\"Distribución de\", var), x = var, y = \"Proporción\")\n  \n  plots[[i]] <- p\n  i <- i + 1\n}\n\n# Mostrar todos los gráficos en un grid (ejemplo con 2 columnas)\ngrid.arrange(grobs = plots, ncol = 2)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n:::\n\n## Bivariant analysis\n\n### Numerical vs. numerical\n\n#### Description\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor(datos[, varNum])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n             hour_of_day       money  Weekdaysort    Monthsort\nhour_of_day  1.000000000  0.20274794 -0.002613959  0.008292999\nmoney        0.202747935  1.00000000 -0.017264091 -0.050043191\nWeekdaysort -0.002613959 -0.01726409  1.000000000  0.044140930\nMonthsort    0.008292999 -0.05004319  0.044140930  1.000000000\n```\n\n\n:::\n:::\n\n\n\n#### Graphic\n\n::: panel-tabset\n## base\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(PerformanceAnalytics)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: xts\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: zoo\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAdjuntando el paquete: 'zoo'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAdjuntando el paquete: 'PerformanceAnalytics'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:graphics':\n\n    legend\n```\n\n\n:::\n\n```{.r .cell-code}\nchart.Correlation(as.matrix(datos[, varNum]),histogram = TRUE,pch=12)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## ggplot2\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggcorrplot)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggcorrplot' was built under R version 4.4.3\n```\n\n\n:::\n\n```{.r .cell-code}\ncorr <- round(cor(datos[, varNum]), 1)\nggcorrplot(corr, lab = T)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: `aes_string()` was deprecated in ggplot2 3.0.0.\nℹ Please use tidy evaluation idioms with `aes()`.\nℹ See also `vignette(\"ggplot2-in-packages\")` for more information.\nℹ The deprecated feature was likely used in the ggcorrplot package.\n  Please report the issue at <https://github.com/kassambara/ggcorrplot/issues>.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n:::\n\n### Numerical vs. categorical\n\n#### Description\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (varN in varNum) {\n  for (varC in varCat) {\n   print(psych::describeBy(datos[, varN], group = datos[, varC])) \n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n Descriptive statistics by group \ngroup: card\n   vars    n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 3547 14.19 4.23     14   14.11 5.93   6  22    16 0.12    -1.13 0.07\n\n Descriptive statistics by group \ngroup: Americano\n   vars   n  mean  sd median trimmed  mad min max range skew kurtosis   se\nX1    1 564 13.19 3.7     13      13 4.45   6  22    16 0.42    -0.53 0.16\n------------------------------------------------------------ \ngroup: Americano with Milk\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 809 13.62 4.31     13   13.39 4.45   6  22    16 0.37    -1.09 0.15\n------------------------------------------------------------ \ngroup: Cappuccino\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 486 14.92 4.23     15   15.05 5.93   6  22    16 -0.22    -1.05 0.19\n------------------------------------------------------------ \ngroup: Cocoa\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 239 15.26 4.26     16    15.4 5.93   7  22    15 -0.28    -1.14 0.28\n------------------------------------------------------------ \ngroup: Cortado\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 287 12.65 3.99     12   12.26 4.45   7  22    15 0.69     -0.6 0.24\n------------------------------------------------------------ \ngroup: Espresso\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 129 13.6 3.57     14   13.49 4.45   7  22    15 0.24    -0.78 0.31\n------------------------------------------------------------ \ngroup: Hot Chocolate\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 276 16.32 3.89     17   16.51 4.45   8  22    14 -0.41    -0.89 0.23\n------------------------------------------------------------ \ngroup: Latte\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 757 14.63 4.31     15   14.67 5.93   7  22    15 -0.08    -1.11 0.16\n\n Descriptive statistics by group \ngroup: Afternoon\n   vars    n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 1205 14.07 1.45     14   14.09 1.48  12  16     4 -0.06    -1.36 0.04\n------------------------------------------------------------ \ngroup: Morning\n   vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 1181  9.4 1.27     10    9.47 1.48   6  11     5 -0.34    -0.93 0.04\n------------------------------------------------------------ \ngroup: Night\n   vars    n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 1161 19.18 1.63     19    19.1 1.48  17  22     5  0.2    -1.17 0.05\n\n Descriptive statistics by group \ngroup: Fri\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 532 13.83 4.46     14   13.64 5.93   6  22    16 0.23    -1.09 0.19\n------------------------------------------------------------ \ngroup: Mon\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 544 14.01 4.29     14   13.94 5.93   6  22    16 0.06    -1.17 0.18\n------------------------------------------------------------ \ngroup: Sat\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 470 13.93 3.89   13.5   13.71 3.71   7  22    15  0.4    -0.79 0.18\n------------------------------------------------------------ \ngroup: Sun\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 419 14.33 3.96     14   14.21 4.45   7  22    15 0.23    -1.02 0.19\n------------------------------------------------------------ \ngroup: Thu\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 510 14.74 4.27     15   14.76 5.93   7  22    15 -0.05     -1.2 0.19\n------------------------------------------------------------ \ngroup: Tue\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 572 14.27 4.39     14   14.24 5.93   7  22    15 0.04    -1.31 0.18\n------------------------------------------------------------ \ngroup: Wed\n   vars   n  mean  sd median trimmed  mad min max range skew kurtosis   se\nX1    1 500 14.23 4.2     14    14.2 5.93   7  22    15 0.08    -1.16 0.19\n\n Descriptive statistics by group \ngroup: Apr\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 168 14.4 3.13     14   14.38 4.45  10  20    10  0.1    -1.37 0.24\n------------------------------------------------------------ \ngroup: Aug\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 272 13.51 4.51     12   13.26 4.45   7  22    15  0.4    -1.18 0.27\n------------------------------------------------------------ \ngroup: Dec\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 259 14.33 4.39     15   14.25 5.93   7  22    15  0.1    -1.23 0.27\n------------------------------------------------------------ \ngroup: Feb\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 423 14.06 3.66     15   14.17 4.45   6  21    15 -0.23    -0.93 0.18\n------------------------------------------------------------ \ngroup: Jan\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 201 14.34 4.36     14   14.25 5.93   7  22    15 0.09     -1.1 0.31\n------------------------------------------------------------ \ngroup: Jul\n   vars   n  mean  sd median trimmed  mad min max range skew kurtosis   se\nX1    1 237 14.18 4.8     13   14.02 5.93   7  22    15  0.3    -1.35 0.31\n------------------------------------------------------------ \ngroup: Jun\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 223 15.23 4.59     16   15.38 5.93   7  22    15 -0.15    -1.47 0.31\n------------------------------------------------------------ \ngroup: Mar\n   vars   n  mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 494 13.51 3.37     14   13.53 4.45   6  21    15 -0.03    -1.02 0.15\n------------------------------------------------------------ \ngroup: May\n   vars   n mean  sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 241 15.2 4.1     15    15.3 5.93   7  22    15 -0.17    -1.12 0.26\n------------------------------------------------------------ \ngroup: Nov\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 259 14.1 4.27     14   14.06 4.45   7  22    15 0.08    -1.03 0.27\n------------------------------------------------------------ \ngroup: Oct\n   vars   n  mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 426 14.04 4.59     14   13.91 5.93   7  22    15  0.2    -1.21 0.22\n------------------------------------------------------------ \ngroup: Sep\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 344 14.4 4.73   13.5   14.34 6.67   7  22    15 0.14    -1.43 0.26\n\n Descriptive statistics by group \ngroup: card\n   vars    n  mean   sd median trimmed  mad   min  max range  skew kurtosis\nX1    1 3547 31.65 4.88  32.82   31.98 4.36 18.12 38.7 20.58 -0.54    -0.67\n     se\nX1 0.08\n\n Descriptive statistics by group \ngroup: Americano\n   vars   n  mean   sd median trimmed mad   min  max range  skew kurtosis   se\nX1    1 564 25.98 1.68  25.96   25.99   0 23.02 28.9  5.88 -0.25    -0.22 0.07\n------------------------------------------------------------ \ngroup: Americano with Milk\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 809 30.59 1.88  30.86   30.57 2.91 27.92 33.8  5.88 -0.17       -1 0.07\n------------------------------------------------------------ \ngroup: Cappuccino\n   vars   n  mean   sd median trimmed  mad   min  max range skew kurtosis   se\nX1    1 486 35.88 1.82  35.76   35.94 2.91 32.82 38.7  5.88 -0.4     -0.7 0.08\n------------------------------------------------------------ \ngroup: Cocoa\n   vars   n  mean   sd median trimmed mad   min  max range  skew kurtosis   se\nX1    1 239 35.65 1.23  35.76    35.7   0 32.82 38.7  5.88 -0.53        2 0.08\n------------------------------------------------------------ \ngroup: Cortado\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 287 25.73 2.09  25.96   25.68 2.91 23.02 28.9  5.88 -0.03    -1.23 0.12\n------------------------------------------------------------ \ngroup: Espresso\n   vars   n  mean   sd median trimmed  mad   min max range  skew kurtosis   se\nX1    1 129 20.85 1.97  21.06   20.81 2.91 18.12  24  5.88 -0.12    -1.09 0.17\n------------------------------------------------------------ \ngroup: Hot Chocolate\n   vars   n  mean   sd median trimmed mad   min  max range  skew kurtosis   se\nX1    1 276 35.99 1.44  35.76   36.03   0 32.82 38.7  5.88 -0.13     0.77 0.09\n------------------------------------------------------------ \ngroup: Latte\n   vars   n mean   sd median trimmed mad   min  max range  skew kurtosis   se\nX1    1 757 35.5 1.82  35.76   35.48   0 32.82 38.7  5.88 -0.18    -0.82 0.07\n\n Descriptive statistics by group \ngroup: Afternoon\n   vars    n  mean   sd median trimmed  mad   min  max range  skew kurtosis\nX1    1 1205 31.64 4.92  32.82   31.95 4.36 18.12 38.7 20.58 -0.53    -0.75\n     se\nX1 0.14\n------------------------------------------------------------ \ngroup: Morning\n   vars    n  mean   sd median trimmed  mad   min  max range  skew kurtosis\nX1    1 1181 30.42 4.94  30.86    30.6 7.26 18.12 38.7 20.58 -0.25     -0.8\n     se\nX1 0.14\n------------------------------------------------------------ \ngroup: Night\n   vars    n  mean   sd median trimmed  mad   min  max range  skew kurtosis\nX1    1 1161 32.89 4.43   33.8   33.38 2.91 18.12 38.7 20.58 -0.91    -0.02\n     se\nX1 0.13\n\n Descriptive statistics by group \ngroup: Fri\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 532 31.58 4.91  32.82   31.87 4.36 18.12 38.7 20.58 -0.51    -0.77 0.21\n------------------------------------------------------------ \ngroup: Mon\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 544 31.92 4.51  32.82   32.17 4.36 18.12 38.7 20.58 -0.53    -0.72 0.19\n------------------------------------------------------------ \ngroup: Sat\n   vars   n  mean sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 470 31.35  5  32.82   31.66 4.36 18.12 38.7 20.58 -0.52    -0.58 0.23\n------------------------------------------------------------ \ngroup: Sun\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 419 31.83 4.88  32.82   32.22 4.36 18.12 38.7 20.58 -0.59    -0.64 0.24\n------------------------------------------------------------ \ngroup: Thu\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 510 31.55 5.19  32.82   31.95 4.36 18.12 38.7 20.58 -0.57    -0.76 0.23\n------------------------------------------------------------ \ngroup: Tue\n   vars   n  mean   sd median trimmed  mad   min  max range  skew kurtosis  se\nX1    1 572 31.76 4.74  32.82   32.06 4.36 18.12 38.7 20.58 -0.53    -0.62 0.2\n------------------------------------------------------------ \ngroup: Wed\n   vars   n mean   sd median trimmed  mad   min  max range  skew kurtosis   se\nX1    1 500 31.5 4.94  32.82   31.85 4.36 18.12 38.7 20.58 -0.51     -0.8 0.22\n\n Descriptive statistics by group \ngroup: Apr\n   vars   n  mean   sd median trimmed  mad min  max range  skew kurtosis   se\nX1    1 168 34.05 4.49   33.8   34.33 7.26  24 38.7  14.7 -0.38    -1.31 0.35\n------------------------------------------------------------ \ngroup: Aug\n   vars   n  mean   sd median trimmed  mad   min   max range skew kurtosis   se\nX1    1 272 27.99 4.63  27.92   28.32 7.26 18.12 32.82  14.7 -0.4    -1.09 0.28\n------------------------------------------------------------ \ngroup: Dec\n   vars   n  mean   sd median trimmed mad   min   max range  skew kurtosis   se\nX1    1 259 31.81 4.61  35.76   32.31   0 21.06 35.76  14.7 -0.72    -0.78 0.29\n------------------------------------------------------------ \ngroup: Feb\n   vars   n  mean   sd median trimmed  mad   min   max range  skew kurtosis\nX1    1 423 31.24 4.69  30.86   31.58 7.26 21.06 35.76  14.7 -0.43    -1.23\n     se\nX1 0.23\n------------------------------------------------------------ \ngroup: Jan\n   vars   n  mean   sd median trimmed  mad   min   max range  skew kurtosis\nX1    1 201 31.84 4.33  30.86   32.23 7.26 21.06 35.76  14.7 -0.61    -0.92\n     se\nX1 0.31\n------------------------------------------------------------ \ngroup: Jul\n   vars   n  mean   sd median trimmed  mad   min   max range skew kurtosis   se\nX1    1 237 29.18 4.77  27.92   29.46 7.26 18.12 37.72  19.6 -0.5    -0.58 0.31\n------------------------------------------------------------ \ngroup: Jun\n   vars   n  mean   sd median trimmed mad   min   max range  skew kurtosis   se\nX1    1 223 34.16 4.29  37.72   34.76   0 23.02 37.72  14.7 -0.96    -0.06 0.29\n------------------------------------------------------------ \ngroup: Mar\n   vars   n  mean   sd median trimmed  mad   min  max range skew kurtosis   se\nX1    1 494 32.17 4.91   33.8    32.3 7.26 21.06 38.7 17.64 -0.3    -1.19 0.22\n------------------------------------------------------------ \ngroup: May\n   vars   n  mean   sd median trimmed mad   min   max range  skew kurtosis   se\nX1    1 241 33.88 4.44  37.72   34.32   0 23.02 37.72  14.7 -0.67     -0.9 0.29\n------------------------------------------------------------ \ngroup: Nov\n   vars   n  mean   sd median trimmed mad   min   max range  skew kurtosis   se\nX1    1 259 33.17 3.84  35.76   33.79   0 21.06 35.76  14.7 -1.18     0.12 0.24\n------------------------------------------------------------ \ngroup: Oct\n   vars   n  mean   sd median trimmed mad   min   max range  skew kurtosis   se\nX1    1 426 32.61 4.29  35.76   33.21   0 21.06 35.76  14.7 -1.01    -0.29 0.21\n------------------------------------------------------------ \ngroup: Sep\n   vars   n  mean   sd median trimmed  mad   min   max range  skew kurtosis\nX1    1 344 29.04 4.46  27.92   29.33 7.26 18.12 35.76 17.64 -0.57    -0.62\n     se\nX1 0.24\n\n Descriptive statistics by group \ngroup: card\n   vars    n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 3547 3.85 1.97      4    3.81 2.97   1   7     6 0.08    -1.23 0.03\n\n Descriptive statistics by group \ngroup: Americano\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 564 3.74 1.89      4    3.69 2.97   1   7     6 0.06    -1.14 0.08\n------------------------------------------------------------ \ngroup: Americano with Milk\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 809 3.82 2.02      4    3.78 2.97   1   7     6 0.12     -1.3 0.07\n------------------------------------------------------------ \ngroup: Cappuccino\n   vars   n mean sd median trimmed  mad min max range skew kurtosis   se\nX1    1 486 3.99  2      4    3.99 2.97   1   7     6 0.01    -1.23 0.09\n------------------------------------------------------------ \ngroup: Cocoa\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 239  3.7 1.94      4    3.63 2.97   1   7     6 0.17    -1.26 0.13\n------------------------------------------------------------ \ngroup: Cortado\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 287 4.18 2.01      4    4.22 2.97   1   7     6 -0.14     -1.3 0.12\n------------------------------------------------------------ \ngroup: Espresso\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 129 4.08 1.77      4    4.08 1.48   1   7     6 0.07    -0.93 0.16\n------------------------------------------------------------ \ngroup: Hot Chocolate\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 276 3.91 1.95      4    3.89 2.97   1   7     6 0.11    -1.15 0.12\n------------------------------------------------------------ \ngroup: Latte\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 757 3.71 1.99      4    3.64 2.97   1   7     6 0.15    -1.23 0.07\n\n Descriptive statistics by group \ngroup: Afternoon\n   vars    n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 1205 4.04 2.01      4    4.05 2.97   1   7     6 -0.06    -1.27 0.06\n------------------------------------------------------------ \ngroup: Morning\n   vars    n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 1181 3.75 1.97      4    3.69 2.97   1   7     6 0.12    -1.25 0.06\n------------------------------------------------------------ \ngroup: Night\n   vars    n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 1161 3.74 1.92      4    3.67 2.97   1   7     6 0.19    -1.11 0.06\n\n Descriptive statistics by group \ngroup: Fri\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 532    5  0      5       5   0   5   5     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Mon\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 544    1  0      1       1   0   1   1     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Sat\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 470    6  0      6       6   0   6   6     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Sun\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 419    7  0      7       7   0   7   7     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Thu\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 510    4  0      4       4   0   4   4     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Tue\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 572    2  0      2       2   0   2   2     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Wed\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 500    3  0      3       3   0   3   3     0  NaN      NaN  0\n\n Descriptive statistics by group \ngroup: Apr\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 168 3.89 2.06      4    3.87 2.97   1   7     6 0.03    -1.33 0.16\n------------------------------------------------------------ \ngroup: Aug\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 272 4.04 2.01      4    4.06 2.97   1   7     6 -0.07    -1.27 0.12\n------------------------------------------------------------ \ngroup: Dec\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 259 3.97 2.12      4    3.96 2.97   1   7     6 0.05    -1.42 0.13\n------------------------------------------------------------ \ngroup: Feb\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 423 3.47 1.87      3    3.37 2.97   1   7     6 0.25       -1 0.09\n------------------------------------------------------------ \ngroup: Jan\n   vars   n mean  sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 201 3.83 1.8      4    3.85 1.48   1   7     6 -0.11    -1.13 0.13\n------------------------------------------------------------ \ngroup: Jul\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 237 3.78 1.85      3    3.73 1.48   1   7     6 0.23    -1.12 0.12\n------------------------------------------------------------ \ngroup: Jun\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 223 4.17 2.02      4    4.21 2.97   1   7     6 -0.06     -1.3 0.14\n------------------------------------------------------------ \ngroup: Mar\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 494 3.82 1.87      4     3.8 2.97   1   7     6 0.03    -1.17 0.08\n------------------------------------------------------------ \ngroup: May\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 241 3.84 1.97      4     3.8 2.97   1   7     6 0.15    -1.12 0.13\n------------------------------------------------------------ \ngroup: Nov\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 259 4.08 1.99      4    4.11 2.97   1   7     6 -0.16    -1.33 0.12\n------------------------------------------------------------ \ngroup: Oct\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 426  3.7 1.94      4    3.63 2.97   1   7     6 0.23    -1.11 0.09\n------------------------------------------------------------ \ngroup: Sep\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 344 3.91 2.15      4    3.88 2.97   1   7     6 0.07    -1.44 0.12\n\n Descriptive statistics by group \ngroup: card\n   vars    n mean  sd median trimmed  mad min max range skew kurtosis   se\nX1    1 3547 6.45 3.5      7    6.42 4.45   1  12    11    0    -1.38 0.06\n\n Descriptive statistics by group \ngroup: Americano\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 564 5.23 3.35      4    4.92 2.97   1  12    11 0.62    -1.03 0.14\n------------------------------------------------------------ \ngroup: Americano with Milk\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 809 6.59 3.39      7     6.6 4.45   1  12    11 -0.11    -1.24 0.12\n------------------------------------------------------------ \ngroup: Cappuccino\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 486 6.24 3.35      6    6.15 4.45   1  12    11 0.17    -1.19 0.15\n------------------------------------------------------------ \ngroup: Cocoa\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 239 6.29 4.02      6     6.2 5.93   1  12    11  0.1    -1.71 0.26\n------------------------------------------------------------ \ngroup: Cortado\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis  se\nX1    1 287  7.1 3.37      8    7.22 2.97   1  12    11 -0.32    -1.07 0.2\n------------------------------------------------------------ \ngroup: Espresso\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis  se\nX1    1 129 6.37 3.37      7    6.28 4.45   1  12    11 0.06    -1.24 0.3\n------------------------------------------------------------ \ngroup: Hot Chocolate\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 276 6.96 3.81    7.5    7.02 5.19   1  12    11 -0.17     -1.6 0.23\n------------------------------------------------------------ \ngroup: Latte\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 757    7 3.37      8    7.11 4.45   1  12    11 -0.29    -1.24 0.12\n\n Descriptive statistics by group \ngroup: Afternoon\n   vars    n mean   sd median trimmed  mad min max range skew kurtosis  se\nX1    1 1205 6.02 3.61      5     5.9 4.45   1  12    11 0.23    -1.45 0.1\n------------------------------------------------------------ \ngroup: Morning\n   vars    n mean   sd median trimmed  mad min max range  skew kurtosis  se\nX1    1 1181 6.74 3.44      7    6.77 4.45   1  12    11 -0.15    -1.32 0.1\n------------------------------------------------------------ \ngroup: Night\n   vars    n mean   sd median trimmed  mad min max range  skew kurtosis  se\nX1    1 1161 6.61 3.41      7    6.61 4.45   1  12    11 -0.06    -1.27 0.1\n\n Descriptive statistics by group \ngroup: Fri\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 532 6.08 3.57      6       6 4.45   1  12    11 0.14    -1.44 0.15\n------------------------------------------------------------ \ngroup: Mon\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 544  6.3 3.58      6    6.22 4.45   1  12    11 0.06    -1.46 0.15\n------------------------------------------------------------ \ngroup: Sat\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 470 6.75 3.53      7     6.8 4.45   1  12    11 -0.11    -1.35 0.16\n------------------------------------------------------------ \ngroup: Sun\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 419 7.18 3.25      8    7.25 4.45   1  12    11 -0.2    -1.17 0.16\n------------------------------------------------------------ \ngroup: Thu\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 510 6.21 3.47      6    6.15 4.45   1  12    11 0.07    -1.37 0.15\n------------------------------------------------------------ \ngroup: Tue\n   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se\nX1    1 572 6.79 3.47      7    6.82 4.45   1  12    11 -0.14    -1.36 0.15\n------------------------------------------------------------ \ngroup: Wed\n   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se\nX1    1 500 6.01 3.44      6    5.86 4.45   1  12    11  0.2    -1.33 0.15\n\n Descriptive statistics by group \ngroup: Apr\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 168    4  0      4       4   0   4   4     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Aug\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 272    8  0      8       8   0   8   8     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Dec\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 259   12  0     12      12   0  12  12     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Feb\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 423    2  0      2       2   0   2   2     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Jan\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 201    1  0      1       1   0   1   1     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Jul\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 237    7  0      7       7   0   7   7     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Jun\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 223    6  0      6       6   0   6   6     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Mar\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 494    3  0      3       3   0   3   3     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: May\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 241    5  0      5       5   0   5   5     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Nov\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 259   11  0     11      11   0  11  11     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Oct\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 426   10  0     10      10   0  10  10     0  NaN      NaN  0\n------------------------------------------------------------ \ngroup: Sep\n   vars   n mean sd median trimmed mad min max range skew kurtosis se\nX1    1 344    9  0      9       9   0   9   9     0  NaN      NaN  0\n```\n\n\n:::\n:::\n\n\n\n#### Graphic\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(gridExtra)\n\nplots <- list()\ni <- 1\n\nfor (varC in varCat) {\n  for (varN in varNum) {\n    \n    grafico <- ggplot(datos, aes(x = .data[[varN]], fill = .data[[varC]])) + \n      geom_histogram(colour = \"black\",\n                     lwd = 0.75,\n                     linetype = 1,\n                     position = \"identity\",\n                     alpha = 0.5) +\n      labs(title = paste(\"Histograma de\", varN, \"por\", varC),\n           x = varN, y = \"Frecuencia\", fill = varC) +\n      theme_minimal()\n    \n    plots[[i]] <- grafico\n    i <- i + 1\n  }\n}\n\n# Mostrar todos en un grid (2 columnas)\ngrid.arrange(grobs = plots, ncol = 2)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n### Categorical vs. categorical\n\n#### Description\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (varc1 in varCat) {\n  for (varc2 in varCat) {\n    if (varc1 != varc2) {\n      prop_table <- prop.table(table(datos[, varc1], datos[, varc2]))\n      cat(\"=============\", varc1, \" vs. \", varc2, \"=========================\\n\")\n      print(prop_table)\n    }\n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n============= cash_type  vs.  coffee_name =========================\n      \n        Americano Americano with Milk Cappuccino      Cocoa    Cortado\n  card 0.15900761          0.22808007 0.13701720 0.06738089 0.08091345\n      \n         Espresso Hot Chocolate      Latte\n  card 0.03636876    0.07781224 0.21341979\n============= cash_type  vs.  Time_of_Day =========================\n      \n       Afternoon   Morning     Night\n  card 0.3397237 0.3329574 0.3273189\n============= cash_type  vs.  Weekday =========================\n      \n             Fri       Mon       Sat       Sun       Thu       Tue       Wed\n  card 0.1499859 0.1533690 0.1325063 0.1181280 0.1437835 0.1612630 0.1409642\n============= cash_type  vs.  Month_name =========================\n      \n              Apr        Aug        Dec        Feb        Jan        Jul\n  card 0.04736397 0.07668452 0.07301945 0.11925571 0.05666761 0.06681703\n      \n              Jun        Mar        May        Nov        Oct        Sep\n  card 0.06287003 0.13927262 0.06794474 0.07301945 0.12010149 0.09698337\n============= coffee_name  vs.  cash_type =========================\n                     \n                            card\n  Americano           0.15900761\n  Americano with Milk 0.22808007\n  Cappuccino          0.13701720\n  Cocoa               0.06738089\n  Cortado             0.08091345\n  Espresso            0.03636876\n  Hot Chocolate       0.07781224\n  Latte               0.21341979\n============= coffee_name  vs.  Time_of_Day =========================\n                     \n                        Afternoon     Morning       Night\n  Americano           0.065689315 0.061742317 0.031575980\n  Americano with Milk 0.067380885 0.093318297 0.067380885\n  Cappuccino          0.046236256 0.034395264 0.056385678\n  Cocoa               0.021144629 0.016351847 0.029884409\n  Cortado             0.024809698 0.040315760 0.015787990\n  Espresso            0.015787990 0.012404849 0.008175923\n  Hot Chocolate       0.022554271 0.013814491 0.041443473\n  Latte               0.076120665 0.060614604 0.076684522\n============= coffee_name  vs.  Weekday =========================\n                     \n                              Fri         Mon         Sat         Sun\n  Americano           0.029602481 0.026219340 0.019453059 0.012968706\n  Americano with Milk 0.029038624 0.036086834 0.033831407 0.027910911\n  Cappuccino          0.017479560 0.020016916 0.019453059 0.019734987\n  Cocoa               0.014660276 0.009585565 0.006484353 0.006766281\n  Cortado             0.010431350 0.009867494 0.015787990 0.011840992\n  Espresso            0.005920496 0.002819284 0.003946997 0.004510854\n  Hot Chocolate       0.012686778 0.009867494 0.006766281 0.011277136\n  Latte               0.030166338 0.038906118 0.026783197 0.023118128\n                     \n                              Thu         Tue         Wed\n  Americano           0.023118128 0.022836200 0.024809698\n  Americano with Milk 0.029038624 0.040315760 0.031857908\n  Cappuccino          0.021708486 0.017761489 0.020862701\n  Cocoa               0.006484353 0.016069918 0.007330138\n  Cortado             0.011840992 0.012404849 0.008739780\n  Espresso            0.007612067 0.004510854 0.007048210\n  Hot Chocolate       0.013532563 0.013814491 0.009867494\n  Latte               0.030448266 0.033549478 0.030448266\n============= coffee_name  vs.  Month_name =========================\n                     \n                               Apr          Aug          Dec          Feb\n  Americano           0.0093036369 0.0104313504 0.0076120665 0.0329856217\n  Americano with Milk 0.0107132788 0.0202988441 0.0160699182 0.0239639132\n  Cappuccino          0.0101494220 0.0095855653 0.0107132788 0.0146602763\n  Cocoa               0.0011277136 0.0031012123 0.0059204962 0.0157879899\n  Cortado             0.0045108542 0.0112771356 0.0087397801 0.0028192839\n  Espresso            0.0011277136 0.0039469975 0.0033831407 0.0047927826\n  Hot Chocolate       0.0028192839 0.0016915703 0.0073301381 0.0090217085\n  Latte               0.0076120665 0.0163518466 0.0132506343 0.0152241331\n                     \n                               Jan          Jul          Jun          Mar\n  Americano           0.0070482098 0.0101494220 0.0039469975 0.0377784043\n  Americano with Milk 0.0146602763 0.0183253454 0.0186072738 0.0231181280\n  Cappuccino          0.0076120665 0.0090217085 0.0129687059 0.0163518466\n  Cocoa               0.0039469975 0.0025373555 0.0011277136 0.0101494220\n  Cortado             0.0062024246 0.0039469975 0.0053566394 0.0084578517\n  Espresso            0.0014096420 0.0039469975 0.0028192839 0.0053566394\n  Hot Chocolate       0.0042289259 0.0031012123 0.0039469975 0.0121229208\n  Latte               0.0115590640 0.0157879899 0.0140964195 0.0259374119\n                     \n                               May          Nov          Oct          Sep\n  Americano           0.0112771356 0.0070482098 0.0124048492 0.0090217085\n  Americano with Milk 0.0152241331 0.0146602763 0.0231181280 0.0293205526\n  Cappuccino          0.0146602763 0.0073301381 0.0124048492 0.0115590640\n  Cocoa               0.0022554271 0.0098674937 0.0090217085 0.0025373555\n  Cortado             0.0047927826 0.0036650691 0.0095855653 0.0115590640\n  Espresso            0.0019734987 0.0008457852 0.0033831407 0.0033831407\n  Hot Chocolate       0.0036650691 0.0104313504 0.0163518466 0.0031012123\n  Latte               0.0140964195 0.0191711305 0.0338314068 0.0265012687\n============= Time_of_Day  vs.  cash_type =========================\n           \n                 card\n  Afternoon 0.3397237\n  Morning   0.3329574\n  Night     0.3273189\n============= Time_of_Day  vs.  coffee_name =========================\n           \n              Americano Americano with Milk  Cappuccino       Cocoa     Cortado\n  Afternoon 0.065689315         0.067380885 0.046236256 0.021144629 0.024809698\n  Morning   0.061742317         0.093318297 0.034395264 0.016351847 0.040315760\n  Night     0.031575980         0.067380885 0.056385678 0.029884409 0.015787990\n           \n               Espresso Hot Chocolate       Latte\n  Afternoon 0.015787990   0.022554271 0.076120665\n  Morning   0.012404849   0.013814491 0.060614604\n  Night     0.008175923   0.041443473 0.076684522\n============= Time_of_Day  vs.  Weekday =========================\n           \n                   Fri        Mon        Sat        Sun        Thu        Tue\n  Afternoon 0.04849168 0.04990133 0.05469411 0.04736397 0.04764590 0.04510854\n  Morning   0.05441218 0.05441218 0.04426276 0.03383141 0.04116154 0.05835918\n  Night     0.04708204 0.04905554 0.03354948 0.03693262 0.05497604 0.05779532\n           \n                   Wed\n  Afternoon 0.04651818\n  Morning   0.04651818\n  Night     0.04792783\n============= Time_of_Day  vs.  Month_name =========================\n           \n                   Apr        Aug        Dec        Feb        Jan        Jul\n  Afternoon 0.02058077 0.02001692 0.02199041 0.04961940 0.02114463 0.01606992\n  Morning   0.01127714 0.03411334 0.02537356 0.03326755 0.01719763 0.02762898\n  Night     0.01550606 0.02255427 0.02565548 0.03636876 0.01832535 0.02311813\n           \n                   Jun        Mar        May        Nov        Oct        Sep\n  Afternoon 0.01522413 0.06146039 0.02199041 0.02847477 0.03834226 0.02480970\n  Morning   0.01888920 0.04623626 0.01691570 0.02368198 0.04341697 0.03495912\n  Night     0.02875670 0.03157598 0.02903862 0.02086270 0.03834226 0.03721455\n============= Weekday  vs.  cash_type =========================\n     \n           card\n  Fri 0.1499859\n  Mon 0.1533690\n  Sat 0.1325063\n  Sun 0.1181280\n  Thu 0.1437835\n  Tue 0.1612630\n  Wed 0.1409642\n============= Weekday  vs.  coffee_name =========================\n     \n        Americano Americano with Milk  Cappuccino       Cocoa     Cortado\n  Fri 0.029602481         0.029038624 0.017479560 0.014660276 0.010431350\n  Mon 0.026219340         0.036086834 0.020016916 0.009585565 0.009867494\n  Sat 0.019453059         0.033831407 0.019453059 0.006484353 0.015787990\n  Sun 0.012968706         0.027910911 0.019734987 0.006766281 0.011840992\n  Thu 0.023118128         0.029038624 0.021708486 0.006484353 0.011840992\n  Tue 0.022836200         0.040315760 0.017761489 0.016069918 0.012404849\n  Wed 0.024809698         0.031857908 0.020862701 0.007330138 0.008739780\n     \n         Espresso Hot Chocolate       Latte\n  Fri 0.005920496   0.012686778 0.030166338\n  Mon 0.002819284   0.009867494 0.038906118\n  Sat 0.003946997   0.006766281 0.026783197\n  Sun 0.004510854   0.011277136 0.023118128\n  Thu 0.007612067   0.013532563 0.030448266\n  Tue 0.004510854   0.013814491 0.033549478\n  Wed 0.007048210   0.009867494 0.030448266\n============= Weekday  vs.  Time_of_Day =========================\n     \n       Afternoon    Morning      Night\n  Fri 0.04849168 0.05441218 0.04708204\n  Mon 0.04990133 0.05441218 0.04905554\n  Sat 0.05469411 0.04426276 0.03354948\n  Sun 0.04736397 0.03383141 0.03693262\n  Thu 0.04764590 0.04116154 0.05497604\n  Tue 0.04510854 0.05835918 0.05779532\n  Wed 0.04651818 0.04651818 0.04792783\n============= Weekday  vs.  Month_name =========================\n     \n              Apr         Aug         Dec         Feb         Jan         Jul\n  Fri 0.007048210 0.009585565 0.008175923 0.020016916 0.011277136 0.010995207\n  Mon 0.008175923 0.011559064 0.011559064 0.024809698 0.008175923 0.006766281\n  Sat 0.006484353 0.013250634 0.011277136 0.009303637 0.009021708 0.007612067\n  Sun 0.006484353 0.010431350 0.012122921 0.009021708 0.002819284 0.006766281\n  Thu 0.006484353 0.012404849 0.007893995 0.017761489 0.010431350 0.007612067\n  Tue 0.007330138 0.009867494 0.012686778 0.015787990 0.007893995 0.013814491\n  Wed 0.005356639 0.009585565 0.009303637 0.022554271 0.007048210 0.013250634\n     \n              Jun         Mar         May         Nov         Oct         Sep\n  Fri 0.007330138 0.025091627 0.009021708 0.012122921 0.018325345 0.010995207\n  Mon 0.007612067 0.019453059 0.010431350 0.009585565 0.018325345 0.016915703\n  Sat 0.009867494 0.020298844 0.005638568 0.014942205 0.010713279 0.014096420\n  Sun 0.010995207 0.011277136 0.009867494 0.008175923 0.014096420 0.016069918\n  Thu 0.009303637 0.018889202 0.013532563 0.009867494 0.018043417 0.011559064\n  Tue 0.008739780 0.021426558 0.010149422 0.013250634 0.021990414 0.018325345\n  Wed 0.009021708 0.022836200 0.009303637 0.005074711 0.018607274 0.009021708\n============= Month_name  vs.  cash_type =========================\n     \n            card\n  Apr 0.04736397\n  Aug 0.07668452\n  Dec 0.07301945\n  Feb 0.11925571\n  Jan 0.05666761\n  Jul 0.06681703\n  Jun 0.06287003\n  Mar 0.13927262\n  May 0.06794474\n  Nov 0.07301945\n  Oct 0.12010149\n  Sep 0.09698337\n============= Month_name  vs.  coffee_name =========================\n     \n         Americano Americano with Milk   Cappuccino        Cocoa      Cortado\n  Apr 0.0093036369        0.0107132788 0.0101494220 0.0011277136 0.0045108542\n  Aug 0.0104313504        0.0202988441 0.0095855653 0.0031012123 0.0112771356\n  Dec 0.0076120665        0.0160699182 0.0107132788 0.0059204962 0.0087397801\n  Feb 0.0329856217        0.0239639132 0.0146602763 0.0157879899 0.0028192839\n  Jan 0.0070482098        0.0146602763 0.0076120665 0.0039469975 0.0062024246\n  Jul 0.0101494220        0.0183253454 0.0090217085 0.0025373555 0.0039469975\n  Jun 0.0039469975        0.0186072738 0.0129687059 0.0011277136 0.0053566394\n  Mar 0.0377784043        0.0231181280 0.0163518466 0.0101494220 0.0084578517\n  May 0.0112771356        0.0152241331 0.0146602763 0.0022554271 0.0047927826\n  Nov 0.0070482098        0.0146602763 0.0073301381 0.0098674937 0.0036650691\n  Oct 0.0124048492        0.0231181280 0.0124048492 0.0090217085 0.0095855653\n  Sep 0.0090217085        0.0293205526 0.0115590640 0.0025373555 0.0115590640\n     \n          Espresso Hot Chocolate        Latte\n  Apr 0.0011277136  0.0028192839 0.0076120665\n  Aug 0.0039469975  0.0016915703 0.0163518466\n  Dec 0.0033831407  0.0073301381 0.0132506343\n  Feb 0.0047927826  0.0090217085 0.0152241331\n  Jan 0.0014096420  0.0042289259 0.0115590640\n  Jul 0.0039469975  0.0031012123 0.0157879899\n  Jun 0.0028192839  0.0039469975 0.0140964195\n  Mar 0.0053566394  0.0121229208 0.0259374119\n  May 0.0019734987  0.0036650691 0.0140964195\n  Nov 0.0008457852  0.0104313504 0.0191711305\n  Oct 0.0033831407  0.0163518466 0.0338314068\n  Sep 0.0033831407  0.0031012123 0.0265012687\n============= Month_name  vs.  Time_of_Day =========================\n     \n       Afternoon    Morning      Night\n  Apr 0.02058077 0.01127714 0.01550606\n  Aug 0.02001692 0.03411334 0.02255427\n  Dec 0.02199041 0.02537356 0.02565548\n  Feb 0.04961940 0.03326755 0.03636876\n  Jan 0.02114463 0.01719763 0.01832535\n  Jul 0.01606992 0.02762898 0.02311813\n  Jun 0.01522413 0.01888920 0.02875670\n  Mar 0.06146039 0.04623626 0.03157598\n  May 0.02199041 0.01691570 0.02903862\n  Nov 0.02847477 0.02368198 0.02086270\n  Oct 0.03834226 0.04341697 0.03834226\n  Sep 0.02480970 0.03495912 0.03721455\n============= Month_name  vs.  Weekday =========================\n     \n              Fri         Mon         Sat         Sun         Thu         Tue\n  Apr 0.007048210 0.008175923 0.006484353 0.006484353 0.006484353 0.007330138\n  Aug 0.009585565 0.011559064 0.013250634 0.010431350 0.012404849 0.009867494\n  Dec 0.008175923 0.011559064 0.011277136 0.012122921 0.007893995 0.012686778\n  Feb 0.020016916 0.024809698 0.009303637 0.009021708 0.017761489 0.015787990\n  Jan 0.011277136 0.008175923 0.009021708 0.002819284 0.010431350 0.007893995\n  Jul 0.010995207 0.006766281 0.007612067 0.006766281 0.007612067 0.013814491\n  Jun 0.007330138 0.007612067 0.009867494 0.010995207 0.009303637 0.008739780\n  Mar 0.025091627 0.019453059 0.020298844 0.011277136 0.018889202 0.021426558\n  May 0.009021708 0.010431350 0.005638568 0.009867494 0.013532563 0.010149422\n  Nov 0.012122921 0.009585565 0.014942205 0.008175923 0.009867494 0.013250634\n  Oct 0.018325345 0.018325345 0.010713279 0.014096420 0.018043417 0.021990414\n  Sep 0.010995207 0.016915703 0.014096420 0.016069918 0.011559064 0.018325345\n     \n              Wed\n  Apr 0.005356639\n  Aug 0.009585565\n  Dec 0.009303637\n  Feb 0.022554271\n  Jan 0.007048210\n  Jul 0.013250634\n  Jun 0.009021708\n  Mar 0.022836200\n  May 0.009303637\n  Nov 0.005074711\n  Oct 0.018607274\n  Sep 0.009021708\n```\n\n\n:::\n:::\n\n\n\n#### Graphic\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(3, 3))  \nfor (varc1 in varCat) {\n  for (varc2 in varCat) {\n    if (varc1 != varc2) {\n      prop_table <- prop.table(table(datos[, varc1], datos[, varc2]))\n      barplot(prop_table, beside = TRUE)\n    }\n  }\n}\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-13-2.png){width=672}\n:::\n\n```{.r .cell-code}\npar(mfrow = c(1, 1))  \n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-13-3.png){width=672}\n:::\n:::\n\n\n\n# Automatic Descriptive Analysis (EDA)\n\nExisten muchas herramientas que realizan la descriptiva de manera automática sin necesidad de la programación. Este apartado permite recoger algunas de ellas para su facilidad.\n\n## `Skim`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'skimr' was built under R version 4.4.3\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ lubridate 1.9.4     ✔ tibble    3.2.1\n✔ purrr     1.0.2     ✔ tidyr     1.3.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ ggplot2::%+%()   masks psych::%+%()\n✖ ggplot2::alpha() masks psych::alpha()\n✖ dplyr::combine() masks gridExtra::combine()\n✖ dplyr::filter()  masks stats::filter()\n✖ dplyr::first()   masks xts::first()\n✖ dplyr::lag()     masks stats::lag()\n✖ dplyr::last()    masks xts::last()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\n## Podem visualitzar un descriptiu de les dades \nskim(datos)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |      |\n|:------------------------|:-----|\n|Name                     |datos |\n|Number of rows           |3547  |\n|Number of columns        |9     |\n|_______________________  |      |\n|Column type frequency:   |      |\n|character                |5     |\n|numeric                  |4     |\n|________________________ |      |\n|Group variables          |None  |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|cash_type     |         0|             1|   4|   4|     0|        1|          0|\n|coffee_name   |         0|             1|   5|  19|     0|        8|          0|\n|Time_of_Day   |         0|             1|   5|   9|     0|        3|          0|\n|Weekday       |         0|             1|   3|   3|     0|        7|          0|\n|Month_name    |         0|             1|   3|   3|     0|       12|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|   sd|    p0|   p25|   p50|   p75| p100|hist  |\n|:-------------|---------:|-------------:|-----:|----:|-----:|-----:|-----:|-----:|----:|:-----|\n|hour_of_day   |         0|             1| 14.19| 4.23|  6.00| 10.00| 14.00| 18.00| 22.0|▆▇▆▇▆ |\n|money         |         0|             1| 31.65| 4.88| 18.12| 27.92| 32.82| 35.76| 38.7|▁▃▂▅▇ |\n|Weekdaysort   |         0|             1|  3.85| 1.97|  1.00|  2.00|  4.00|  6.00|  7.0|▇▃▃▃▆ |\n|Monthsort     |         0|             1|  6.45| 3.50|  1.00|  3.00|  7.00| 10.00| 12.0|▇▃▃▅▇ |\n\n\n:::\n\n```{.r .cell-code}\n# Visualitzem exclusivament les variables numériques\nskim(datos) %>% yank(\"numeric\")\n```\n\n::: {.cell-output-display}\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|   sd|    p0|   p25|   p50|   p75| p100|hist  |\n|:-------------|---------:|-------------:|-----:|----:|-----:|-----:|-----:|-----:|----:|:-----|\n|hour_of_day   |         0|             1| 14.19| 4.23|  6.00| 10.00| 14.00| 18.00| 22.0|▆▇▆▇▆ |\n|money         |         0|             1| 31.65| 4.88| 18.12| 27.92| 32.82| 35.76| 38.7|▁▃▂▅▇ |\n|Weekdaysort   |         0|             1|  3.85| 1.97|  1.00|  2.00|  4.00|  6.00|  7.0|▇▃▃▃▆ |\n|Monthsort     |         0|             1|  6.45| 3.50|  1.00|  3.00|  7.00| 10.00| 12.0|▇▃▃▅▇ |\n\n\n\n:::\n\n```{.r .cell-code}\nskim(datos) %>% yank(\"character\")\n```\n\n::: {.cell-output-display}\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|cash_type     |         0|             1|   4|   4|     0|        1|          0|\n|coffee_name   |         0|             1|   5|  19|     0|        8|          0|\n|Time_of_Day   |         0|             1|   5|   9|     0|        3|          0|\n|Weekday       |         0|             1|   3|   3|     0|        7|          0|\n|Month_name    |         0|             1|   3|   3|     0|       12|          0|\n\n\n\n:::\n:::\n\n\n\n## `Vis`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(visdat)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'visdat' was built under R version 4.4.3\n```\n\n\n:::\n\n```{.r .cell-code}\n## Busquem per a variables numériques o categóriques si hi ha NA's\nvis_dat(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n\n```{.r .cell-code}\n## Visualitzem percentatges de NA's en les variables\nvis_miss(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-15-2.png){width=672}\n:::\n\n```{.r .cell-code}\n## Generem la matriu de correlacions\ndatos %>% select(where(is.numeric)) %>% \n  vis_cor()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-15-3.png){width=672}\n:::\n\n```{.r .cell-code}\n## Podem visualitzar condicionants de les dades. En aquest cas, mirem si tenim mes de \n## 2 clases\nvis_expect(datos, ~ .x > 2)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-15-4.png){width=672}\n:::\n:::\n\n\n\n## Inspectdf\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(inspectdf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'inspectdf' was built under R version 4.4.3\n```\n\n\n:::\n\n```{.r .cell-code}\n## Tipus de dades\ninspect_types(datos) %>% show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n\n```{.r .cell-code}\n## Utilització de la memoria\ninspect_mem(datos) %>% show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-2.png){width=672}\n:::\n\n```{.r .cell-code}\n## Comprovem NA's\ndata_price_dummy <- datos %>% \n  mutate(price_dummy = if_else(money > 35, \"High\", \"Low\"))\n\ninspect_na(data_price_dummy %>% filter(price_dummy == \"High\"),\n           data_price_dummy %>% filter(price_dummy == \"Low\")) %>%\n  show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-3.png){width=672}\n:::\n\n```{.r .cell-code}\n## Comprovem la distribució de les variables \ninspect_num(datos) %>% show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-4.png){width=672}\n:::\n\n```{.r .cell-code}\n## check categorical variable distribution\ninspect_imb(datos) %>% show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-5.png){width=672}\n:::\n\n```{.r .cell-code}\n## check two categorical\ninspect_imb(data_price_dummy %>% filter(price_dummy == \"High\"),\n            data_price_dummy %>% filter(price_dummy == \"Low\")) %>%\n  show_plot() + theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-6.png){width=672}\n:::\n\n```{.r .cell-code}\n## similiar to inspect_imb, but for all levels\ninspect_cat(datos) %>% show_plot()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in geom_bar(stat = \"identity\", position = \"stack\", colour = \"black\", :\nIgnoring unknown parameters: `size`\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-7.png){width=672}\n:::\n\n```{.r .cell-code}\ninspect_cor(datos) %>% show_plot()\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-16-8.png){width=672}\n:::\n:::\n\n\n\n## dataReporter (antiguo dataMaid)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"dataReporter\")\ndataReporter::makeDataReport(datos, output = \"html\", file = \"/Users/ramitjans/Downloads/Preprocessing/report.Rmd\")\ndataReporter::makeCodebook(data = datos, file = \"/Users/ramitjans/Downloads/Preprocessing/codebook.Rmd\")\n```\n:::\n\n\n\n## DataExplorer\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DataExplorer)\nplot_str(datos)\nintroduce(datos)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  rows columns discrete_columns continuous_columns all_missing_columns\n1 3547       9                5                  4                   0\n  total_missing_values complete_rows total_observations memory_usage\n1                    0          3547              31923       217536\n```\n\n\n:::\n\n```{.r .cell-code}\nplot_intro(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_missing(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_bar(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-3.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_bar(datos, with = \"money\")\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-4.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_bar(datos, by = \"cash_type\")\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-5.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_histogram(datos)\n```\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-6.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_correlation(na.omit(datos), maxcat = 5L)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n3 features with more than 5 categories ignored!\ncoffee_name: 8 categories\nWeekday: 7 categories\nMonth_name: 12 categories\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in cor(x = structure(list(hour_of_day = c(10L, 12L, 12L, 13L, 13L, : La\ndesviación estándar es cero\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 14 rows containing missing values or values outside the scale range\n(`geom_text()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Preprocessing_files/figure-html/unnamed-chunk-17-7.png){width=672}\n:::\n:::\n\n\n\n## SmartEDA\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"SmartEDA\")\n## Overview of the data\nExpData(data = datos,type = 1)\n\n## structure of the data    \nExpData(data = datos,type = 2)\n```\n:::\n\n\n### Frequency or custom tables for categorical variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSmartEDA::ExpCTable(datos,Target=NULL,margin=1,clim=10,nlim=5,round=2,bin=NULL,per=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      Variable               Valid Frequency Percent CumPercent\n1  coffee_name           Americano       564   15.90      15.90\n2  coffee_name Americano with Milk       809   22.81      38.71\n3  coffee_name          Cappuccino       486   13.70      52.41\n4  coffee_name               Cocoa       239    6.74      59.15\n5  coffee_name             Cortado       287    8.09      67.24\n6  coffee_name            Espresso       129    3.64      70.88\n7  coffee_name       Hot Chocolate       276    7.78      78.66\n8  coffee_name               Latte       757   21.34     100.00\n9  coffee_name               TOTAL      3547      NA         NA\n10 Time_of_Day           Afternoon      1205   33.97      33.97\n11 Time_of_Day             Morning      1181   33.30      67.27\n12 Time_of_Day               Night      1161   32.73     100.00\n13 Time_of_Day               TOTAL      3547      NA         NA\n14     Weekday                 Fri       532   15.00      15.00\n15     Weekday                 Mon       544   15.34      30.34\n16     Weekday                 Sat       470   13.25      43.59\n17     Weekday                 Sun       419   11.81      55.40\n18     Weekday                 Thu       510   14.38      69.78\n19     Weekday                 Tue       572   16.13      85.91\n20     Weekday                 Wed       500   14.10     100.01\n21     Weekday               TOTAL      3547      NA         NA\n```\n\n\n:::\n:::\n\n\n\n\n## `Esquisse`\n\nEste paquete nos permite abrir un `Shiny` con los controles para realizar mediante menús. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nesquisse::esquisser(datos)\n```\n:::\n\n\n\n# Bibliografia\n\n-   https://www.analyticsvidhya.com/blog/2022/10/three-r-libraries-for-automated-eda/\n-   https://cran.r-project.org/web/packages/dlookr/vignettes/EDA.html\n-   https://cran.r-project.org/web/packages/DataExplorer/vignettes/dataexplorer-intro.html\n-   https://daya6489.github.io/SmartEDA/\n",
    "supporting": [
      "Preprocessing_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}