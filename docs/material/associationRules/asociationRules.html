<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dante Conti, Sergi Ramirez, (c) IDEAI">
<meta name="dcterms.date" content="2025-10-20">

<title>Association Rules – Machine Learning for Data Scientist</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../imagenes/ideai_logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-83f5ffed4bb819e1a410337fb71ccdff.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Machine Learning for Data Scientist</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Grau en Estadística</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><img src="../..\imagenes/Logo_UPC.svg.png" class="img-fluid"></p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#almacenamiento-de-datos-de-transacciones" id="toc-almacenamiento-de-datos-de-transacciones" class="nav-link active" data-scroll-target="#almacenamiento-de-datos-de-transacciones"><span class="header-section-number">1</span> Almacenamiento de datos de transacciones</a>
  <ul class="collapse">
  <li><a href="#formato-de-matriz-binaria" id="toc-formato-de-matriz-binaria" class="nav-link" data-scroll-target="#formato-de-matriz-binaria"><span class="header-section-number">1.1</span> Formato de matriz binaria</a></li>
  <li><a href="#formato-de-lista-basket" id="toc-formato-de-lista-basket" class="nav-link" data-scroll-target="#formato-de-lista-basket"><span class="header-section-number">1.2</span> Formato de lista <em>(basket)</em></a></li>
  </ul></li>
  <li><a href="#generación-de-les-reglas-de-asociación-a-partir-de-conjuntos-de-elementos-freceuntes" id="toc-generación-de-les-reglas-de-asociación-a-partir-de-conjuntos-de-elementos-freceuntes" class="nav-link" data-scroll-target="#generación-de-les-reglas-de-asociación-a-partir-de-conjuntos-de-elementos-freceuntes"><span class="header-section-number">2</span> Generación de les reglas de asociación a partir de conjuntos de elementos freceuntes</a>
  <ul class="collapse">
  <li><a href="#a-priori" id="toc-a-priori" class="nav-link" data-scroll-target="#a-priori"><span class="header-section-number">2.1</span> A Priori</a></li>
  <li><a href="#eclat" id="toc-eclat" class="nav-link" data-scroll-target="#eclat"><span class="header-section-number">2.2</span> Eclat</a></li>
  <li><a href="#fp-growth" id="toc-fp-growth" class="nav-link" data-scroll-target="#fp-growth"><span class="header-section-number">2.3</span> FP-Growth</a></li>
  </ul></li>
  <li><a href="#generación-de-reglas-y-criterios-de-selección" id="toc-generación-de-reglas-y-criterios-de-selección" class="nav-link" data-scroll-target="#generación-de-reglas-y-criterios-de-selección"><span class="header-section-number">3</span> Generación de reglas y criterios de selección</a>
  <ul class="collapse">
  <li><a href="#soporte-support" id="toc-soporte-support" class="nav-link" data-scroll-target="#soporte-support"><span class="header-section-number">3.1</span> Soporte <em>(Support)</em></a></li>
  <li><a href="#confianza-confidence" id="toc-confianza-confidence" class="nav-link" data-scroll-target="#confianza-confidence"><span class="header-section-number">3.2</span> Confianza <em>(Confidence)</em></a></li>
  <li><a href="#elevación-lift" id="toc-elevación-lift" class="nav-link" data-scroll-target="#elevación-lift"><span class="header-section-number">3.3</span> Elevación <em>(Lift)</em></a></li>
  <li><a href="#apalancamiento-leverage" id="toc-apalancamiento-leverage" class="nav-link" data-scroll-target="#apalancamiento-leverage"><span class="header-section-number">3.4</span> Apalancamiento <em>(Leverage)</em></a></li>
  <li><a href="#conviction" id="toc-conviction" class="nav-link" data-scroll-target="#conviction"><span class="header-section-number">3.5</span> Conviction</a></li>
  <li><a href="#zhangs-metric" id="toc-zhangs-metric" class="nav-link" data-scroll-target="#zhangs-metric"><span class="header-section-number">3.6</span> Zhangs Metric</a></li>
  </ul></li>
  <li><a href="#poda-de-las-reglas-de-asociación" id="toc-poda-de-las-reglas-de-asociación" class="nav-link" data-scroll-target="#poda-de-las-reglas-de-asociación"><span class="header-section-number">4</span> Poda de las reglas de asociación</a></li>
  <li><a href="#visualización-de-reglas" id="toc-visualización-de-reglas" class="nav-link" data-scroll-target="#visualización-de-reglas"><span class="header-section-number">5</span> Visualización de reglas</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="asociationRules.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Association Rules</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Basket Market Analysis</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dante Conti, Sergi Ramirez, (c) IDEAI </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 20, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">October 20, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="almacenamiento-de-datos-de-transacciones" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="almacenamiento-de-datos-de-transacciones"><span class="header-section-number">1</span> Almacenamiento de datos de transacciones</h2>
<section id="formato-de-matriz-binaria" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="formato-de-matriz-binaria"><span class="header-section-number">1.1</span> Formato de matriz binaria</h3>
<p>Cada fila representa una transacción y cada columna representa uno de los posibles ítems que podrían formar parte de ella. Las celdas de la matriz se rellenan con valores binarios (1 o 0) que indican si un artículo está presente (1) o ausente (0) en una transacción concreta.</p>
<p>Este es el formato de entrada que utilizan la mayoría de algoritmos, sin embargo, no suele ser el más adecuado para almacenar las transacciones ya que requiere conocer de antemano todos los posibles ítems para crear las columnas y, dado que cada transacción suele contener solo una pequeña proporción de los posibles ítems, la mayoría de valores son cero (sparse).</p>
</section>
<section id="formato-de-lista-basket" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="formato-de-lista-basket"><span class="header-section-number">1.2</span> Formato de lista <em>(basket)</em></h3>
<p>Cada transacción se representa como una lista de los ítems que forman parte de ella y se le asigna un identificador único por transacción. Este formato es más eficiente desde el punto de vista de la memoria, ya que sólo almacena los elementos presentes en cada transacción.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----libs----------------------------------------------------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github("rsquaredacademy/mbar")</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mbar)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arulesViz)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----preprocess----------------------------------------------------------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>mba_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"online-retail.xlsx"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> <span class="fu">mbar_prep_data</span>(mba_data, InvoiceNo, Description)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(transactions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1,114
  item_1 item_2 item_3 item_4 item_5 item_6 item_7 item_8 item_9 item_10 item_11
  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
1 WHITE… "WHIT… "CREA… "KNIT… "RED … "SET … "GLAS… ""     ""     ""      ""     
2 HAND … "HAND… ""     ""     ""     ""     ""     ""     ""     ""      ""     
3 ASSOR… "POPP… "POPP… "FELT… "IVOR… "BOX … "BOX … "BOX … "HOME… "LOVE … "RECIP…
4 JAM M… "RED … "YELL… "BLUE… ""     ""     ""     ""     ""     ""      ""     
5 BATH … ""     ""     ""     ""     ""     ""     ""     ""     ""      ""     
6 ALARM… "ALAR… "ALAR… "PAND… "STAR… "INFL… "VINT… "SET/… "ROUN… "SPACE… "LUNCH…
# ℹ 1,103 more variables: item_12 &lt;chr&gt;, item_13 &lt;chr&gt;, item_14 &lt;chr&gt;,
#   item_15 &lt;chr&gt;, item_16 &lt;chr&gt;, item_17 &lt;chr&gt;, item_18 &lt;chr&gt;, item_19 &lt;chr&gt;,
#   item_20 &lt;chr&gt;, item_21 &lt;chr&gt;, item_22 &lt;chr&gt;, item_23 &lt;chr&gt;, item_24 &lt;chr&gt;,
#   item_25 &lt;chr&gt;, item_26 &lt;chr&gt;, item_27 &lt;chr&gt;, item_28 &lt;chr&gt;, item_29 &lt;chr&gt;,
#   item_30 &lt;chr&gt;, item_31 &lt;chr&gt;, item_32 &lt;chr&gt;, item_33 &lt;chr&gt;, item_34 &lt;chr&gt;,
#   item_35 &lt;chr&gt;, item_36 &lt;chr&gt;, item_37 &lt;chr&gt;, item_38 &lt;chr&gt;, item_39 &lt;chr&gt;,
#   item_40 &lt;chr&gt;, item_41 &lt;chr&gt;, item_42 &lt;chr&gt;, item_43 &lt;chr&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----read_data-----------------------------------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>(basket_data <span class="ot">&lt;-</span> <span class="fu">read.transactions</span>(<span class="st">"transaction_data.csv"</span>, <span class="at">format =</span> <span class="st">"basket"</span>, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">","</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>transactions in sparse format with
 25901 transactions (rows) and
 10085 items (columns)</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----summary-------------------------------------------------------------</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(basket_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>transactions as itemMatrix in sparse format with
 25901 rows (elements/itemsets/transactions) and
 10085 columns (items) and a density of 0.001660018 

most frequent items:
WHITE HANGING HEART T-LIGHT HOLDER           REGENCY CAKESTAND 3 TIER 
                              1999                               1914 
           JUMBO BAG RED RETROSPOT                      PARTY BUNTING 
                              1806                               1488 
           LUNCH BAG RED RETROSPOT                            (Other) 
                              1404                             425005 

element (itemset/transaction) length distribution:
sizes
   0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 
1454 4578 1727 1208  942  891  781  715  696  683  612  642  547  530  543  555 
  16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31 
 537  479  459  491  428  405  328  311  280  248  261  235  221  233  224  175 
  32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47 
 174  145  149  139  122  119  100  117   98   94  102   93   72   73   74   71 
  48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63 
  69   68   59   70   49   49   54   57   42   32   42   39   34   40   22   27 
  64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79 
  30   24   34   28   25   21   23   26   14   17   24   11   18   14   13   10 
  80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95 
  16   18   15   10    9   16   13   16   13    7    8   12   12    8    7    7 
  96   97   98   99  100  101  102  103  104  105  106  107  108  109  110  111 
   4    7    9    5    8    8    4    5    7    2    3    7    9    4    7    4 
 112  113  114  115  116  117  118  119  120  121  122  123  124  125  126  127 
   2    7    1    1    4    7    6    2    3    5    4    4    2    5    6    2 
 129  130  131  132  133  134  135  136  137  138  139  140  141  142  143  144 
   1    4    3    6    6    3    4    3    2    1    1    3    8    5    3    4 
 145  146  147  148  149  150  151  152  153  154  155  156  157  158  159  160 
   4    6    2    3    1    4    3    2    4    7    3    3    5    2    4    5 
 162  163  164  167  168  169  170  171  172  173  174  175  176  177  178  179 
   1    2    1    3    5    2    2    4    3    1    3    5    1    2    2    2 
 180  181  182  183  184  185  186  187  189  190  192  193  194  196  197  198 
   2    1    2    1    2    1    1    2    2    1    1    5    1    2    3    2 
 201  202  204  205  206  207  208  209  212  213  215  219  220  224  226  227 
   1    1    2    2    1    3    3    2    1    2    2    7    1    3    3    1 
 228  230  232  234  236  238  240  241  244  248  249  250  252  256  257  258 
   1    2    1    2    1    2    2    2    1    1    2    2    1    1    1    1 
 260  261  263  265  266  270  272  281  284  285  298  299  301  303  304  305 
   2    1    2    1    1    1    1    1    1    2    1    2    1    1    1    3 
 312  314  316  320  321  326  327  329  332  333  338  339  341  344  348  350 
   2    1    1    2    1    1    1    1    1    1    1    1    1    2    1    1 
 360  365  367  375  391  394  398  400  402  405  411  419  422  429  431  442 
   2    1    1    3    1    1    1    1    1    1    1    2    1    1    2    1 
 447  460  468  471  477  509  514  530  587  627 1114 
   1    1    1    1    1    1    1    1    1    1    1 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    2.00    8.00   16.74   20.00 1114.00 

includes extended item information - examples:
                   labels
1   *Boombox Ipod Classic
2 *USB Office Mirror Ball
3                       ?</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----format = single-----------------------------------------------------</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>get_data <span class="ot">&lt;-</span> <span class="fu">read.transactions</span>(<span class="st">"retail.csv"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">"single"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"InvoiceNo"</span>, <span class="st">"item"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----item frequency plot-------------------------------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(basket_data, <span class="at">topN =</span> <span class="dv">10</span>, <span class="at">type =</span> <span class="st">'absolute'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asociationRules_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Mlxtend</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Arules</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.preprocessing <span class="im">import</span> TransactionEncoder</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> [[<span class="st">'Milk'</span>, <span class="st">'Onion'</span>, <span class="st">'Nutmeg'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Dill'</span>, <span class="st">'Onion'</span>, <span class="st">'Nutmeg'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Milk'</span>, <span class="st">'Apple'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>],</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Milk'</span>, <span class="st">'Unicorn'</span>, <span class="st">'Corn'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Corn'</span>, <span class="st">'Onion'</span>, <span class="st">'Onion'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Ice cream'</span>, <span class="st">'Eggs'</span>]]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>te <span class="op">=</span> TransactionEncoder()</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>te_ary <span class="op">=</span> te.fit(dataset).transform(dataset)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(te_ary, columns<span class="op">=</span>te.columns_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">

</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="generación-de-les-reglas-de-asociación-a-partir-de-conjuntos-de-elementos-freceuntes" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="generación-de-les-reglas-de-asociación-a-partir-de-conjuntos-de-elementos-freceuntes"><span class="header-section-number">2</span> Generación de les reglas de asociación a partir de conjuntos de elementos freceuntes</h2>
<section id="a-priori" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="a-priori"><span class="header-section-number">2.1</span> A Priori</h3>
<p>Propuesto por Agrawal and Srikant en 1994 es uno de los primeros algoritmos desarrollados para la identificación de itemsets frecuentes en bases de datos con transacciones, y posterior conversión a reglas de asociación. Si bien sucesivas modificaciones del algoritmo original han conseguido mejoras notables en su rendimiento, sigue siendo muy empleado. Este algoritmo tiene dos etapas:</p>
<ul>
<li><p>Identificar todos los itemsets que ocurren con una frecuencia por encima de un determinado límite (itemsets frecuentes).</p></li>
<li><p>Convertir los itemsets frecuentes en reglas de asociación.</p></li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----generate rules------------------------------------------------------</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.009</span>, <span class="at">conf=</span><span class="fl">0.8</span>, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> <span class="st">"rules"</span>, <span class="at">maxlen =</span> <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.8    0.1    1 none FALSE            TRUE       5   0.009      1
 maxlen target  ext
      4  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 233 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[10085 item(s), 25901 transaction(s)] done [0.06s].
sorting and recoding items ... [508 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> done [0.01s].
writing ... [22 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----rules summary-------------------------------------------------------</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>set of 22 rules

rule length distribution (lhs + rhs):sizes
 2  3  4 
11  9  2 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.000   2.000   2.500   2.591   3.000   4.000 

summary of quality measures:
    support           confidence        coverage             lift      
 Min.   :0.009034   Min.   :0.8035   Min.   :0.009614   Min.   :22.59  
 1st Qu.:0.010453   1st Qu.:0.8530   1st Qu.:0.011592   1st Qu.:25.02  
 Median :0.013223   Median :0.8868   Median :0.014362   Median :55.94  
 Mean   :0.012760   Mean   :0.9120   Mean   :0.014061   Mean   :48.55  
 3rd Qu.:0.014362   3rd Qu.:1.0000   3rd Qu.:0.014362   3rd Qu.:61.23  
 Max.   :0.018339   Max.   :1.0000   Max.   :0.021544   Max.   :71.30  
     count      
 Min.   :234.0  
 1st Qu.:270.8  
 Median :342.5  
 Mean   :330.5  
 3rd Qu.:372.0  
 Max.   :475.0  

mining info:
        data ntransactions support confidence
 basket_data         25901   0.009        0.8
                                                                                                  call
 apriori(data = basket_data, parameter = list(supp = 0.009, conf = 0.8, target = "rules", maxlen = 4))</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> apriori</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> apriori(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    support                     itemsets
0       0.8                       (Eggs)
1       1.0               (Kidney Beans)
2       0.6                       (Milk)
3       0.6                      (Onion)
4       0.6                     (Yogurt)
5       0.8         (Eggs, Kidney Beans)
6       0.6                (Eggs, Onion)
7       0.6         (Milk, Kidney Beans)
8       0.6        (Onion, Kidney Beans)
9       0.6       (Yogurt, Kidney Beans)
10      0.6  (Eggs, Onion, Kidney Beans)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="eclat" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="eclat"><span class="header-section-number">2.2</span> Eclat</h3>
<p>En el 2000, Zaki propuso un nuevo algoritmo para encontrar patrones frecuentes (itemsets frecuentes) llamado Equivalence Class Transformation (Eclat). La principal diferencia entre este algoritmo y el Apriori es la forma en que se escanean y analizan los datos. El algoritmo Apriori emplea transacciones almacenadas de forma horizontal (lista o basket), es decir, todos los elementos que forman una misma transacción están en la misma línea. El algoritmo Eclat, sin embargo, analiza las transacciones en formato vertical, donde cada línea contiene un único ítem y el identificador de las transacciones en las que aparece ese ítem.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rules_ECLAT <span class="ot">&lt;-</span> <span class="fu">eclat</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.009</span>, <span class="at">maxlen =</span> <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Eclat

parameter specification:
 tidLists support minlen maxlen            target  ext
    FALSE   0.009      1      4 frequent itemsets TRUE

algorithmic control:
 sparse sort verbose
      7   -2    TRUE

Absolute minimum support count: 233 

create itemset ... 
set transactions ...[10085 item(s), 25901 transaction(s)] done [0.06s].
sorting and recoding items ... [508 item(s)] done [0.00s].
creating sparse bit matrix ... [508 row(s), 25901 column(s)] done [0.00s].
writing  ... [742 set(s)] done [0.21s].
Creating S4 object  ... done [0.00s].</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_ECLAT, <span class="at">by =</span> <span class="st">'support'</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     items                                support    count
[1]  {WHITE HANGING HEART T-LIGHT HOLDER} 0.07717849 1999 
[2]  {REGENCY CAKESTAND 3 TIER}           0.07389676 1914 
[3]  {JUMBO BAG RED RETROSPOT}            0.06972704 1806 
[4]  {PARTY BUNTING}                      0.05744952 1488 
[5]  {LUNCH BAG RED RETROSPOT}            0.05420640 1404 
[6]  {ASSORTED COLOUR BIRD ORNAMENT}      0.05030694 1303 
[7]  {SET OF 3 CAKE TINS PANTRY DESIGN}   0.04914868 1273 
[8]  {PACK OF 72 RETROSPOT CAKE CASES}    0.04521061 1171 
[9]  {LUNCH BAG  BLACK SKULL.}            0.04347322 1126 
[10] {POSTAGE}                            0.04223775 1094 </code></pre>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> fpmax</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> fpmax(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   support                     itemsets
0      0.6  (Eggs, Onion, Kidney Beans)
1      0.6         (Milk, Kidney Beans)
2      0.6       (Yogurt, Kidney Beans)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="fp-growth" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="fp-growth"><span class="header-section-number">2.3</span> FP-Growth</h3>
<p>En el 2000, Zaki propuso un nuevo algoritmo para encontrar patrones frecuentes (itemsets frecuentes) llamado Equivalence Class Transformation (Eclat). La principal diferencia entre este algoritmo y el Apriori es la forma en que se escanean y analizan los datos. El algoritmo Apriori emplea transacciones almacenadas de forma horizontal (lista o basket), es decir, todos los elementos que forman una misma transacción están en la misma línea. El algoritmo Eclat, sin embargo, analiza las transacciones en formato vertical, donde cada línea contiene un único ítem y el identificador de las transacciones en las que aparece ese ítem.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">

</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> fpgrowth</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> fpgrowth(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    support                     itemsets
0       1.0               (Kidney Beans)
1       0.8                       (Eggs)
2       0.6                     (Yogurt)
3       0.6                       (Milk)
4       0.6                      (Onion)
5       0.8         (Eggs, Kidney Beans)
6       0.6       (Yogurt, Kidney Beans)
7       0.6         (Milk, Kidney Beans)
8       0.6                (Eggs, Onion)
9       0.6        (Onion, Kidney Beans)
10      0.6  (Eggs, Onion, Kidney Beans)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="generación-de-reglas-y-criterios-de-selección" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="generación-de-reglas-y-criterios-de-selección"><span class="header-section-number">3</span> Generación de reglas y criterios de selección</h2>
<section id="soporte-support" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="soporte-support"><span class="header-section-number">3.1</span> Soporte <em>(Support)</em></h3>
<p>El soporte es una métrica asociada al conjunto de <em>items</em> y no a las reglas de asociación en si. Existen los siguientes tipos de soporte:</p>
<ul>
<li><strong>soporte antecedente</strong>: Proporción de transacciones que contienen el antecedente (A)</li>
<li><strong>soporte consecuente</strong>: Proporción de transacciones que contienen el consecuente (C)</li>
<li><strong>soporte</strong>: Proporción de transacciones que combinan el antecedente (A) y el consecuente (C)</li>
</ul>
<p>El soporte se utiliza para medir la abundancia o frecuencia (significancia o importancia) de un <em>item sets</em> en una base de datos.</p>
<p><span class="math inline">\(Support(A \rightarrow C) = support (A \cup C)\)</span></p>
<p>El rango del soporte va entre 0 y 1.</p>
</section>
<section id="confianza-confidence" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="confianza-confidence"><span class="header-section-number">3.2</span> Confianza <em>(Confidence)</em></h3>
<p>La confianza de una regla <span class="math inline">\(A \rightarrow C\)</span> es la probabilidad de ver el consecuente en una transacción, dado que también contiene el antecedente. La regla no es simétrica y su valor máximo es 1 que significa que el consecuente y el antecedente siempre ocurren juntos y el mínimo es 0.</p>
<p><span class="math inline">\(confidence (A \rightarrow C) = \frac{support(A \rightarrow C)}{support(A)}\)</span></p>
</section>
<section id="elevación-lift" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="elevación-lift"><span class="header-section-number">3.3</span> Elevación <em>(Lift)</em></h3>
<p>La métrica de elevación se utiliza comúnmente para medir con qué frecuencia el antecedente y el consecuente de una regla <span class="math inline">\(A \rightarrow C\)</span> ocurren juntos con mayor frecuencia de lo que esperaríamos si fueran estadísticamente independientes. Si <span class="math inline">\(A\)</span> y <span class="math inline">\(C\)</span> son independientes, la puntuación de elevación será exactamente 1.</p>
<p><span class="math inline">\(lift(A\rightarrow C) = \frac{confidence(A\rightarrow C)}{support(C)}, range: [0, \infty)\)</span></p>
</section>
<section id="apalancamiento-leverage" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="apalancamiento-leverage"><span class="header-section-number">3.4</span> Apalancamiento <em>(Leverage)</em></h3>
<p>El apalancamiento calcula la diferencia entre la frecuencia observada de <span class="math inline">\(A\)</span> y <span class="math inline">\(C\)</span> apareciendo juntos y la frecuencia esperada si <span class="math inline">\(A\)</span> y <span class="math inline">\(C\)</span> fueran independientes. Un valor de apalancamiento de 0 indica independencia.</p>
<p><span class="math inline">\(leverage(A \rightarrow C) = support (A \rightarrow C) - support (A) \cdot support(C), range:[-1, 1]\)</span></p>
</section>
<section id="conviction" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="conviction"><span class="header-section-number">3.5</span> Conviction</h3>
<p>Un valor alto de convicción significa que el consecuente depende en gran medida del antecedente. Por ejemplo, en el caso de una puntuación de confianza perfecta, el denominador se convierte en 0 (debido a 1 - 1), por lo que la puntuación de convicción se define como ‘inf’. Similar al caso de la elevación, si los elementos son independientes, la convicción es 1.</p>
<p><span class="math inline">\(Conviction(A \rightarrow C) = \frac{1 - support(C)}{1 - confidence(A \rightarrow C)}, range: [0, \infty)\)</span></p>
</section>
<section id="zhangs-metric" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="zhangs-metric"><span class="header-section-number">3.6</span> Zhangs Metric</h3>
<p>Mide tanto la asociación como la disociación. El valor oscila entre -1 y 1. Un valor positivo (<span class="math inline">\(&gt; 0\)</span>) indica asociación y un valor negativo, disociación.</p>
<p><span class="math inline">\(ZhangMetric(A \rightarrow C) = \frac{confidence(A \rightarrow C) - confidence(A' \rightarrow C)}{max(confidence(A \rightarrow C), confidence(A' \rightarrow C))}, range: [-1, 1]\)</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----inspect rules-------------------------------------------------------</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>basket_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'confidence'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(basket_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                  rhs                                   support confidence    coverage     lift count
[1]  {BACK DOOR}                       =&gt; {KEY FOB}                         0.009613528  1.0000000 0.009613528 61.23168   249
[2]  {SET 3 RETROSPOT TEA}             =&gt; {SUGAR}                           0.014362380  1.0000000 0.014362380 69.62634   372
[3]  {SUGAR}                           =&gt; {SET 3 RETROSPOT TEA}             0.014362380  1.0000000 0.014362380 69.62634   372
[4]  {SET 3 RETROSPOT TEA}             =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[5]  {SUGAR}                           =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[6]  {SHED}                            =&gt; {KEY FOB}                         0.011273696  1.0000000 0.011273696 61.23168   292
[7]  {SET 3 RETROSPOT TEA,                                                                                                   
      SUGAR}                           =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[8]  {COFFEE,                                                                                                                
      SET 3 RETROSPOT TEA}             =&gt; {SUGAR}                           0.014362380  1.0000000 0.014362380 69.62634   372
[9]  {COFFEE,                                                                                                                
      SUGAR}                           =&gt; {SET 3 RETROSPOT TEA}             0.014362380  1.0000000 0.014362380 69.62634   372
[10] {PINK REGENCY TEACUP AND SAUCER,                                                                                        
      REGENCY CAKESTAND 3 TIER,                                                                                              
      ROSES REGENCY TEACUP AND SAUCER} =&gt; {GREEN REGENCY TEACUP AND SAUCER} 0.009999614  0.8900344 0.011235087 25.16679   259</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by support------------------------------------------------</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'support'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                   rhs                                  support confidence   coverage     lift count
[1]  {PINK REGENCY TEACUP AND SAUCER,                                                                                       
      ROSES REGENCY TEACUP AND SAUCER}  =&gt; {GREEN REGENCY TEACUP AND SAUCER} 0.01833906  0.8828996 0.02077140 24.96505   475
[2]  {GREEN REGENCY TEACUP AND SAUCER,                                                                                      
      PINK REGENCY TEACUP AND SAUCER}   =&gt; {ROSES REGENCY TEACUP AND SAUCER} 0.01833906  0.8512545 0.02154357 22.59051   475
[3]  {SET 3 RETROSPOT TEA}              =&gt; {SUGAR}                           0.01436238  1.0000000 0.01436238 69.62634   372
[4]  {SUGAR}                            =&gt; {SET 3 RETROSPOT TEA}             0.01436238  1.0000000 0.01436238 69.62634   372
[5]  {SET 3 RETROSPOT TEA}              =&gt; {COFFEE}                          0.01436238  1.0000000 0.01436238 55.94168   372
[6]  {COFFEE}                           =&gt; {SET 3 RETROSPOT TEA}             0.01436238  0.8034557 0.01787576 55.94168   372
[7]  {SUGAR}                            =&gt; {COFFEE}                          0.01436238  1.0000000 0.01436238 55.94168   372
[8]  {COFFEE}                           =&gt; {SUGAR}                           0.01436238  0.8034557 0.01787576 55.94168   372
[9]  {SET 3 RETROSPOT TEA,                                                                                                  
      SUGAR}                            =&gt; {COFFEE}                          0.01436238  1.0000000 0.01436238 55.94168   372
[10] {COFFEE,                                                                                                               
      SET 3 RETROSPOT TEA}              =&gt; {SUGAR}                           0.01436238  1.0000000 0.01436238 69.62634   372</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by confidence---------------------------------------------</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'confidence'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                  rhs                                   support confidence    coverage     lift count
[1]  {BACK DOOR}                       =&gt; {KEY FOB}                         0.009613528  1.0000000 0.009613528 61.23168   249
[2]  {SET 3 RETROSPOT TEA}             =&gt; {SUGAR}                           0.014362380  1.0000000 0.014362380 69.62634   372
[3]  {SUGAR}                           =&gt; {SET 3 RETROSPOT TEA}             0.014362380  1.0000000 0.014362380 69.62634   372
[4]  {SET 3 RETROSPOT TEA}             =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[5]  {SUGAR}                           =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[6]  {SHED}                            =&gt; {KEY FOB}                         0.011273696  1.0000000 0.011273696 61.23168   292
[7]  {SET 3 RETROSPOT TEA,                                                                                                   
      SUGAR}                           =&gt; {COFFEE}                          0.014362380  1.0000000 0.014362380 55.94168   372
[8]  {COFFEE,                                                                                                                
      SET 3 RETROSPOT TEA}             =&gt; {SUGAR}                           0.014362380  1.0000000 0.014362380 69.62634   372
[9]  {COFFEE,                                                                                                                
      SUGAR}                           =&gt; {SET 3 RETROSPOT TEA}             0.014362380  1.0000000 0.014362380 69.62634   372
[10] {PINK REGENCY TEACUP AND SAUCER,                                                                                        
      REGENCY CAKESTAND 3 TIER,                                                                                              
      ROSES REGENCY TEACUP AND SAUCER} =&gt; {GREEN REGENCY TEACUP AND SAUCER} 0.009999614  0.8900344 0.011235087 25.16679   259</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by lift---------------------------------------------------</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'lift'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                              rhs                       support    
[1]  {REGENCY TEA PLATE PINK}      =&gt; {REGENCY TEA PLATE GREEN} 0.009034400
[2]  {SET 3 RETROSPOT TEA}         =&gt; {SUGAR}                   0.014362380
[3]  {SUGAR}                       =&gt; {SET 3 RETROSPOT TEA}     0.014362380
[4]  {COFFEE, SET 3 RETROSPOT TEA} =&gt; {SUGAR}                   0.014362380
[5]  {COFFEE, SUGAR}               =&gt; {SET 3 RETROSPOT TEA}     0.014362380
[6]  {BACK DOOR}                   =&gt; {KEY FOB}                 0.009613528
[7]  {SHED}                        =&gt; {KEY FOB}                 0.011273696
[8]  {REGENCY TEA PLATE GREEN}     =&gt; {REGENCY TEA PLATE ROSES} 0.010347091
[9]  {SET 3 RETROSPOT TEA}         =&gt; {COFFEE}                  0.014362380
[10] {COFFEE}                      =&gt; {SET 3 RETROSPOT TEA}     0.014362380
     confidence coverage    lift     count
[1]  0.8863636  0.010192657 71.29722 234  
[2]  1.0000000  0.014362380 69.62634 372  
[3]  1.0000000  0.014362380 69.62634 372  
[4]  1.0000000  0.014362380 69.62634 372  
[5]  1.0000000  0.014362380 69.62634 372  
[6]  1.0000000  0.009613528 61.23168 249  
[7]  1.0000000  0.011273696 61.23168 292  
[8]  0.8322981  0.012431952 55.99313 268  
[9]  1.0000000  0.014362380 55.94168 372  
[10] 0.8034557  0.017875758 55.94168 372  </code></pre>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> association_rules</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>association_rules(frequent_itemsets, metric<span class="op">=</span><span class="st">"confidence"</span>, min_threshold<span class="op">=</span><span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              antecedents            consequents  ...  certainty  kulczynski
0                  (Eggs)         (Kidney Beans)  ...      0.000       0.900
1          (Kidney Beans)                 (Eggs)  ...      0.000       0.900
2                (Yogurt)         (Kidney Beans)  ...      0.000       0.800
3                  (Milk)         (Kidney Beans)  ...      0.000       0.800
4                  (Eggs)                (Onion)  ...      0.375       0.875
5                 (Onion)                 (Eggs)  ...      1.000       0.875
6                 (Onion)         (Kidney Beans)  ...      0.000       0.800
7           (Eggs, Onion)         (Kidney Beans)  ...      0.000       0.800
8    (Eggs, Kidney Beans)                (Onion)  ...      0.375       0.875
9   (Onion, Kidney Beans)                 (Eggs)  ...      1.000       0.875
10                 (Eggs)  (Onion, Kidney Beans)  ...      0.375       0.875
11                (Onion)   (Eggs, Kidney Beans)  ...      1.000       0.875

[12 rows x 14 columns]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="poda-de-las-reglas-de-asociación" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="poda-de-las-reglas-de-asociación"><span class="header-section-number">4</span> Poda de las reglas de asociación</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----what influenced purchase of sugar-----------------------------------</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>sugar_rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.009</span>, <span class="at">conf =</span> <span class="fl">0.8</span>), </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default =</span> <span class="st">"lhs"</span>, <span class="at">rhs =</span> <span class="st">"SUGAR"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.8    0.1    1 none FALSE            TRUE       5   0.009      1
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 233 

set item appearances ...[1 item(s)] done [0.00s].
set transactions ...[10085 item(s), 25901 transaction(s)] done [0.06s].
sorting and recoding items ... [508 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 done [0.01s].
writing ... [3 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>rules_sugar <span class="ot">&lt;-</span> <span class="fu">sort</span>(sugar_rules, <span class="at">by =</span> <span class="st">"confidence"</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules_sugar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                              rhs     support    confidence coverage  
[1] {SET 3 RETROSPOT TEA}         =&gt; {SUGAR} 0.01436238 1.0000000  0.01436238
[2] {COFFEE, SET 3 RETROSPOT TEA} =&gt; {SUGAR} 0.01436238 1.0000000  0.01436238
[3] {COFFEE}                      =&gt; {SUGAR} 0.01436238 0.8034557  0.01787576
    lift     count
[1] 69.62634 372  
[2] 69.62634 372  
[3] 55.94168 372  </code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----what purchases did sugar influence----------------------------------</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>sugar_rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.009</span>, <span class="at">conf =</span> <span class="fl">0.8</span>), </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default =</span> <span class="st">"rhs"</span>, <span class="at">lhs =</span> <span class="st">"SUGAR"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.8    0.1    1 none FALSE            TRUE       5   0.009      1
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 233 

set item appearances ...[1 item(s)] done [0.00s].
set transactions ...[10085 item(s), 25901 transaction(s)] done [0.06s].
sorting and recoding items ... [508 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 done [0.00s].
writing ... [2 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>rules_sugar <span class="ot">&lt;-</span> <span class="fu">sort</span>(sugar_rules, <span class="at">by =</span> <span class="st">"confidence"</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules_sugar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs        rhs                   support    confidence coverage   lift    
[1] {SUGAR} =&gt; {SET 3 RETROSPOT TEA} 0.01436238 1          0.01436238 69.62634
[2] {SUGAR} =&gt; {COFFEE}              0.01436238 1          0.01436238 55.94168
    count
[1] 372  
[2] 372  </code></pre>
</div>
</div>
</section>
<section id="visualización-de-reglas" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="visualización-de-reglas"><span class="header-section-number">5</span> Visualización de reglas</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">R</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----plot rules----------------------------------------------------------</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(basket_rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asociationRules_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----plot rules----------------------------------------------------------</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(top_rules, <span class="at">method =</span> <span class="st">"graph"</span>, <span class="at">engine =</span> <span class="st">"igraph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asociationRules_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>


<!-- -->

</section>

<p>Esta web está creada por Dante Conti y Sergi Ramírez, (c) 2025</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb46" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Association Rules"</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Basket Market Analysis"</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Dante Conti, Sergi Ramirez, (c) IDEAI</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r format(Sys.Date())`"</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="an">date-modified:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cerulean</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf:</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cerulean</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a><span class="co">  eval: true</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Almacenamiento de datos de transacciones</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a><span class="fu">### Formato de matriz binaria</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>Cada fila representa una transacción y cada columna representa uno de los posibles ítems que podrían formar parte de ella. Las celdas de la matriz se rellenan con valores binarios (1 o 0) que indican si un artículo está presente (1) o ausente (0) en una transacción concreta.</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>Este es el formato de entrada que utilizan la mayoría de algoritmos, sin embargo, no suele ser el más adecuado para almacenar las transacciones ya que requiere conocer de antemano todos los posibles ítems para crear las columnas y, dado que cada transacción suele contener solo una pequeña proporción de los posibles ítems, la mayoría de valores son cero (sparse).</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a><span class="fu">### Formato de lista *(basket)*</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>Cada transacción se representa como una lista de los ítems que forman parte de ella y se le asigna un identificador único por transacción. Este formato es más eficiente desde el punto de vista de la memoria, ya que sólo almacena los elementos presentes en cada transacción.</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>:::: panel-tabset</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a><span class="do">## ----libs----------------------------------------------------------------</span></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github("rsquaredacademy/mbar")</span></span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mbar)</span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arulesViz)</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a><span class="do">## ----preprocess----------------------------------------------------------</span></span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>mba_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"online-retail.xlsx"</span>)</span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> <span class="fu">mbar_prep_data</span>(mba_data, InvoiceNo, Description)</span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(transactions)</span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a><span class="do">## ----read_data-----------------------------------------------------------</span></span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true" tabindex="-1"></a>(basket_data <span class="ot">&lt;-</span> <span class="fu">read.transactions</span>(<span class="st">"transaction_data.csv"</span>, <span class="at">format =</span> <span class="st">"basket"</span>, </span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">","</span>))</span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true" tabindex="-1"></a><span class="do">## ----summary-------------------------------------------------------------</span></span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(basket_data)</span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-83"><a href="#cb46-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-84"><a href="#cb46-84" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true" tabindex="-1"></a><span class="do">## ----format = single-----------------------------------------------------</span></span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true" tabindex="-1"></a>get_data <span class="ot">&lt;-</span> <span class="fu">read.transactions</span>(<span class="st">"retail.csv"</span>, </span>
<span id="cb46-88"><a href="#cb46-88" aria-hidden="true" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">"single"</span>,</span>
<span id="cb46-89"><a href="#cb46-89" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb46-90"><a href="#cb46-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"InvoiceNo"</span>, <span class="st">"item"</span>))</span>
<span id="cb46-91"><a href="#cb46-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-92"><a href="#cb46-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-93"><a href="#cb46-93" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, fig.width=8, fig.height=6}</span></span>
<span id="cb46-94"><a href="#cb46-94" aria-hidden="true" tabindex="-1"></a><span class="in">## ----item frequency plot-------------------------------------------------</span></span>
<span id="cb46-95"><a href="#cb46-95" aria-hidden="true" tabindex="-1"></a><span class="in">itemFrequencyPlot(basket_data, topN = 10, type = 'absolute')</span></span>
<span id="cb46-96"><a href="#cb46-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-97"><a href="#cb46-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-98"><a href="#cb46-98" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python</span></span>
<span id="cb46-99"><a href="#cb46-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-100"><a href="#cb46-100" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb46-101"><a href="#cb46-101" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mlxtend</span></span>
<span id="cb46-102"><a href="#cb46-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-105"><a href="#cb46-105" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-106"><a href="#cb46-106" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb46-107"><a href="#cb46-107" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.preprocessing <span class="im">import</span> TransactionEncoder</span>
<span id="cb46-108"><a href="#cb46-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-109"><a href="#cb46-109" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> [[<span class="st">'Milk'</span>, <span class="st">'Onion'</span>, <span class="st">'Nutmeg'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb46-110"><a href="#cb46-110" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Dill'</span>, <span class="st">'Onion'</span>, <span class="st">'Nutmeg'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb46-111"><a href="#cb46-111" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Milk'</span>, <span class="st">'Apple'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Eggs'</span>],</span>
<span id="cb46-112"><a href="#cb46-112" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Milk'</span>, <span class="st">'Unicorn'</span>, <span class="st">'Corn'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Yogurt'</span>],</span>
<span id="cb46-113"><a href="#cb46-113" aria-hidden="true" tabindex="-1"></a>           [<span class="st">'Corn'</span>, <span class="st">'Onion'</span>, <span class="st">'Onion'</span>, <span class="st">'Kidney Beans'</span>, <span class="st">'Ice cream'</span>, <span class="st">'Eggs'</span>]]</span>
<span id="cb46-114"><a href="#cb46-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-115"><a href="#cb46-115" aria-hidden="true" tabindex="-1"></a>te <span class="op">=</span> TransactionEncoder()</span>
<span id="cb46-116"><a href="#cb46-116" aria-hidden="true" tabindex="-1"></a>te_ary <span class="op">=</span> te.fit(dataset).transform(dataset)</span>
<span id="cb46-117"><a href="#cb46-117" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(te_ary, columns<span class="op">=</span>te.columns_)</span>
<span id="cb46-118"><a href="#cb46-118" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-119"><a href="#cb46-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-120"><a href="#cb46-120" aria-hidden="true" tabindex="-1"></a><span class="fu">## Arules</span></span>
<span id="cb46-121"><a href="#cb46-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-124"><a href="#cb46-124" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-125"><a href="#cb46-125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-126"><a href="#cb46-126" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-127"><a href="#cb46-127" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb46-128"><a href="#cb46-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-129"><a href="#cb46-129" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generación de les reglas de asociación a partir de conjuntos de elementos freceuntes</span></span>
<span id="cb46-130"><a href="#cb46-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-131"><a href="#cb46-131" aria-hidden="true" tabindex="-1"></a><span class="fu">### A Priori</span></span>
<span id="cb46-132"><a href="#cb46-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-133"><a href="#cb46-133" aria-hidden="true" tabindex="-1"></a>Propuesto por Agrawal and Srikant en 1994 es uno de los primeros algoritmos desarrollados para la identificación de itemsets frecuentes en bases de datos con transacciones, y posterior conversión a reglas de asociación. Si bien sucesivas modificaciones del algoritmo original han conseguido mejoras notables en su rendimiento, sigue siendo muy empleado. Este algoritmo tiene dos etapas:</span>
<span id="cb46-134"><a href="#cb46-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-135"><a href="#cb46-135" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Identificar todos los itemsets que ocurren con una frecuencia por encima de un determinado límite (itemsets frecuentes).</span>
<span id="cb46-136"><a href="#cb46-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-137"><a href="#cb46-137" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Convertir los itemsets frecuentes en reglas de asociación.</span>
<span id="cb46-138"><a href="#cb46-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-139"><a href="#cb46-139" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb46-140"><a href="#cb46-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-141"><a href="#cb46-141" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-142"><a href="#cb46-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-145"><a href="#cb46-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-146"><a href="#cb46-146" aria-hidden="true" tabindex="-1"></a><span class="do">## ----generate rules------------------------------------------------------</span></span>
<span id="cb46-147"><a href="#cb46-147" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.009</span>, <span class="at">conf=</span><span class="fl">0.8</span>, </span>
<span id="cb46-148"><a href="#cb46-148" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> <span class="st">"rules"</span>, <span class="at">maxlen =</span> <span class="dv">4</span>))</span>
<span id="cb46-149"><a href="#cb46-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-150"><a href="#cb46-150" aria-hidden="true" tabindex="-1"></a><span class="do">## ----rules summary-------------------------------------------------------</span></span>
<span id="cb46-151"><a href="#cb46-151" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rules)</span>
<span id="cb46-152"><a href="#cb46-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-153"><a href="#cb46-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-154"><a href="#cb46-154" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python</span></span>
<span id="cb46-155"><a href="#cb46-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-158"><a href="#cb46-158" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-159"><a href="#cb46-159" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> apriori</span>
<span id="cb46-160"><a href="#cb46-160" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> apriori(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-161"><a href="#cb46-161" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span>
<span id="cb46-162"><a href="#cb46-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-163"><a href="#cb46-163" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-164"><a href="#cb46-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-165"><a href="#cb46-165" aria-hidden="true" tabindex="-1"></a><span class="fu">### Eclat</span></span>
<span id="cb46-166"><a href="#cb46-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-167"><a href="#cb46-167" aria-hidden="true" tabindex="-1"></a>En el 2000, Zaki propuso un nuevo algoritmo para encontrar patrones frecuentes (itemsets frecuentes) llamado Equivalence Class Transformation (Eclat). La principal diferencia entre este algoritmo y el Apriori es la forma en que se escanean y analizan los datos. El algoritmo Apriori emplea transacciones almacenadas de forma horizontal (lista o basket), es decir, todos los elementos que forman una misma transacción están en la misma línea. El algoritmo Eclat, sin embargo, analiza las transacciones en formato vertical, donde cada línea contiene un único ítem y el identificador de las transacciones en las que aparece ese ítem.</span>
<span id="cb46-168"><a href="#cb46-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-169"><a href="#cb46-169" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb46-170"><a href="#cb46-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-171"><a href="#cb46-171" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-172"><a href="#cb46-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-175"><a href="#cb46-175" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-176"><a href="#cb46-176" aria-hidden="true" tabindex="-1"></a>rules_ECLAT <span class="ot">&lt;-</span> <span class="fu">eclat</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.009</span>, <span class="at">maxlen =</span> <span class="dv">4</span>))</span>
<span id="cb46-177"><a href="#cb46-177" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_ECLAT, <span class="at">by =</span> <span class="st">'support'</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb46-178"><a href="#cb46-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-179"><a href="#cb46-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-180"><a href="#cb46-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-181"><a href="#cb46-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-182"><a href="#cb46-182" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python</span></span>
<span id="cb46-183"><a href="#cb46-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-186"><a href="#cb46-186" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-187"><a href="#cb46-187" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> fpmax</span>
<span id="cb46-188"><a href="#cb46-188" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> fpmax(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-189"><a href="#cb46-189" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span>
<span id="cb46-190"><a href="#cb46-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-191"><a href="#cb46-191" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-192"><a href="#cb46-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-193"><a href="#cb46-193" aria-hidden="true" tabindex="-1"></a><span class="fu">### FP-Growth</span></span>
<span id="cb46-194"><a href="#cb46-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-195"><a href="#cb46-195" aria-hidden="true" tabindex="-1"></a>En el 2000, Zaki propuso un nuevo algoritmo para encontrar patrones frecuentes (itemsets frecuentes) llamado Equivalence Class Transformation (Eclat). La principal diferencia entre este algoritmo y el Apriori es la forma en que se escanean y analizan los datos. El algoritmo Apriori emplea transacciones almacenadas de forma horizontal (lista o basket), es decir, todos los elementos que forman una misma transacción están en la misma línea. El algoritmo Eclat, sin embargo, analiza las transacciones en formato vertical, donde cada línea contiene un único ítem y el identificador de las transacciones en las que aparece ese ítem.</span>
<span id="cb46-196"><a href="#cb46-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-197"><a href="#cb46-197" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb46-198"><a href="#cb46-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-199"><a href="#cb46-199" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-200"><a href="#cb46-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-201"><a href="#cb46-201" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python</span></span>
<span id="cb46-202"><a href="#cb46-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-205"><a href="#cb46-205" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-206"><a href="#cb46-206" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> fpgrowth</span>
<span id="cb46-207"><a href="#cb46-207" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> fpgrowth(df, min_support<span class="op">=</span><span class="fl">0.6</span>, use_colnames<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-208"><a href="#cb46-208" aria-hidden="true" tabindex="-1"></a>frequent_itemsets</span>
<span id="cb46-209"><a href="#cb46-209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-210"><a href="#cb46-210" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-211"><a href="#cb46-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-212"><a href="#cb46-212" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generación de reglas y criterios de selección</span></span>
<span id="cb46-213"><a href="#cb46-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-214"><a href="#cb46-214" aria-hidden="true" tabindex="-1"></a><span class="fu">### Soporte *(Support)*</span></span>
<span id="cb46-215"><a href="#cb46-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-216"><a href="#cb46-216" aria-hidden="true" tabindex="-1"></a>El soporte es una métrica asociada al conjunto de *items* y no a las reglas de asociación en si. Existen los siguientes tipos de soporte:</span>
<span id="cb46-217"><a href="#cb46-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-218"><a href="#cb46-218" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**soporte antecedente**: Proporción de transacciones que contienen el antecedente (A)</span>
<span id="cb46-219"><a href="#cb46-219" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**soporte consecuente**: Proporción de transacciones que contienen el consecuente (C)</span>
<span id="cb46-220"><a href="#cb46-220" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**soporte**: Proporción de transacciones que combinan el antecedente (A) y el consecuente (C)</span>
<span id="cb46-221"><a href="#cb46-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-222"><a href="#cb46-222" aria-hidden="true" tabindex="-1"></a>El soporte se utiliza para medir la abundancia o frecuencia (significancia o importancia) de un *item sets* en una base de datos.</span>
<span id="cb46-223"><a href="#cb46-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-224"><a href="#cb46-224" aria-hidden="true" tabindex="-1"></a>$Support(A \rightarrow C) = support (A \cup C)$</span>
<span id="cb46-225"><a href="#cb46-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-226"><a href="#cb46-226" aria-hidden="true" tabindex="-1"></a>El rango del soporte va entre 0 y 1.</span>
<span id="cb46-227"><a href="#cb46-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-228"><a href="#cb46-228" aria-hidden="true" tabindex="-1"></a><span class="fu">### Confianza *(Confidence)*</span></span>
<span id="cb46-229"><a href="#cb46-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-230"><a href="#cb46-230" aria-hidden="true" tabindex="-1"></a>La confianza de una regla $A \rightarrow C$ es la probabilidad de ver el consecuente en una transacción, dado que también contiene el antecedente. La regla no es simétrica y su valor máximo es 1 que significa que el consecuente y el antecedente siempre ocurren juntos y el mínimo es 0.</span>
<span id="cb46-231"><a href="#cb46-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-232"><a href="#cb46-232" aria-hidden="true" tabindex="-1"></a>$confidence (A \rightarrow C) = \frac{support(A \rightarrow C)}{support(A)}$</span>
<span id="cb46-233"><a href="#cb46-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-234"><a href="#cb46-234" aria-hidden="true" tabindex="-1"></a><span class="fu">### Elevación *(Lift)*</span></span>
<span id="cb46-235"><a href="#cb46-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-236"><a href="#cb46-236" aria-hidden="true" tabindex="-1"></a>La métrica de elevación se utiliza comúnmente para medir con qué frecuencia el antecedente y el consecuente de una regla $A \rightarrow C$ ocurren juntos con mayor frecuencia de lo que esperaríamos si fueran estadísticamente independientes. Si $A$ y $C$ son independientes, la puntuación de elevación será exactamente 1.</span>
<span id="cb46-237"><a href="#cb46-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-238"><a href="#cb46-238" aria-hidden="true" tabindex="-1"></a>$lift(A\rightarrow C) = \frac{confidence(A\rightarrow C)}{support(C)}, range: [0, \infty)$</span>
<span id="cb46-239"><a href="#cb46-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-240"><a href="#cb46-240" aria-hidden="true" tabindex="-1"></a><span class="fu">### Apalancamiento *(Leverage)*</span></span>
<span id="cb46-241"><a href="#cb46-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-242"><a href="#cb46-242" aria-hidden="true" tabindex="-1"></a>El apalancamiento calcula la diferencia entre la frecuencia observada de $A$ y $C$ apareciendo juntos y la frecuencia esperada si $A$ y $C$ fueran independientes. Un valor de apalancamiento de 0 indica independencia.</span>
<span id="cb46-243"><a href="#cb46-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-244"><a href="#cb46-244" aria-hidden="true" tabindex="-1"></a>$leverage(A \rightarrow C) = support (A \rightarrow C) - support (A) \cdot support(C), range:<span class="co">[</span><span class="ot">-1, 1</span><span class="co">]</span>$</span>
<span id="cb46-245"><a href="#cb46-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-246"><a href="#cb46-246" aria-hidden="true" tabindex="-1"></a><span class="fu">### Conviction</span></span>
<span id="cb46-247"><a href="#cb46-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-248"><a href="#cb46-248" aria-hidden="true" tabindex="-1"></a>Un valor alto de convicción significa que el consecuente depende en gran medida del antecedente. Por ejemplo, en el caso de una puntuación de confianza perfecta, el denominador se convierte en 0 (debido a 1 - 1), por lo que la puntuación de convicción se define como 'inf'. Similar al caso de la elevación, si los elementos son independientes, la convicción es 1.</span>
<span id="cb46-249"><a href="#cb46-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-250"><a href="#cb46-250" aria-hidden="true" tabindex="-1"></a>$Conviction(A \rightarrow C) = \frac{1 - support(C)}{1 - confidence(A \rightarrow C)}, range: [0, \infty)$</span>
<span id="cb46-251"><a href="#cb46-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-252"><a href="#cb46-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-253"><a href="#cb46-253" aria-hidden="true" tabindex="-1"></a><span class="fu">### Zhangs Metric</span></span>
<span id="cb46-254"><a href="#cb46-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-255"><a href="#cb46-255" aria-hidden="true" tabindex="-1"></a>Mide tanto la asociación como la disociación. El valor oscila entre -1 y 1. Un valor positivo ($&gt; 0$) indica asociación y un valor negativo, disociación.</span>
<span id="cb46-256"><a href="#cb46-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-257"><a href="#cb46-257" aria-hidden="true" tabindex="-1"></a>$ZhangMetric(A \rightarrow C) = \frac{confidence(A \rightarrow C) - confidence(A' \rightarrow C)}{max(confidence(A \rightarrow C), confidence(A' \rightarrow C))}, range: <span class="co">[</span><span class="ot">-1, 1</span><span class="co">]</span>$</span>
<span id="cb46-258"><a href="#cb46-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-259"><a href="#cb46-259" aria-hidden="true" tabindex="-1"></a>:::panel-tabset</span>
<span id="cb46-260"><a href="#cb46-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-261"><a href="#cb46-261" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-262"><a href="#cb46-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-265"><a href="#cb46-265" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-266"><a href="#cb46-266" aria-hidden="true" tabindex="-1"></a><span class="do">## ----inspect rules-------------------------------------------------------</span></span>
<span id="cb46-267"><a href="#cb46-267" aria-hidden="true" tabindex="-1"></a>basket_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'confidence'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-268"><a href="#cb46-268" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(basket_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb46-269"><a href="#cb46-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-270"><a href="#cb46-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-273"><a href="#cb46-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-274"><a href="#cb46-274" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb46-275"><a href="#cb46-275" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-276"><a href="#cb46-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-277"><a href="#cb46-277" aria-hidden="true" tabindex="-1"></a><span class="do">## ----redundant rules-----------------------------------------------------</span></span>
<span id="cb46-278"><a href="#cb46-278" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules[<span class="fu">is.redundant</span>(rules)])</span>
<span id="cb46-279"><a href="#cb46-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-280"><a href="#cb46-280" aria-hidden="true" tabindex="-1"></a><span class="do">## ----non redundant rules-------------------------------------------------</span></span>
<span id="cb46-281"><a href="#cb46-281" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules[<span class="sc">!</span><span class="fu">is.redundant</span>(rules)])</span>
<span id="cb46-282"><a href="#cb46-282" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-283"><a href="#cb46-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-286"><a href="#cb46-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-287"><a href="#cb46-287" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by support------------------------------------------------</span></span>
<span id="cb46-288"><a href="#cb46-288" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'support'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-289"><a href="#cb46-289" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb46-290"><a href="#cb46-290" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span>
<span id="cb46-291"><a href="#cb46-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-292"><a href="#cb46-292" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by confidence---------------------------------------------</span></span>
<span id="cb46-293"><a href="#cb46-293" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'confidence'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-294"><a href="#cb46-294" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb46-295"><a href="#cb46-295" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span>
<span id="cb46-296"><a href="#cb46-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-297"><a href="#cb46-297" aria-hidden="true" tabindex="-1"></a><span class="do">## ----top rules by lift---------------------------------------------------</span></span>
<span id="cb46-298"><a href="#cb46-298" aria-hidden="true" tabindex="-1"></a>supp_rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">'lift'</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-299"><a href="#cb46-299" aria-hidden="true" tabindex="-1"></a>top_rules <span class="ot">&lt;-</span> supp_rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb46-300"><a href="#cb46-300" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(top_rules)</span>
<span id="cb46-301"><a href="#cb46-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-302"><a href="#cb46-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-303"><a href="#cb46-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## Python</span></span>
<span id="cb46-304"><a href="#cb46-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-307"><a href="#cb46-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb46-308"><a href="#cb46-308" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> association_rules</span>
<span id="cb46-309"><a href="#cb46-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-310"><a href="#cb46-310" aria-hidden="true" tabindex="-1"></a>association_rules(frequent_itemsets, metric<span class="op">=</span><span class="st">"confidence"</span>, min_threshold<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb46-311"><a href="#cb46-311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-312"><a href="#cb46-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-313"><a href="#cb46-313" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-314"><a href="#cb46-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-315"><a href="#cb46-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-316"><a href="#cb46-316" aria-hidden="true" tabindex="-1"></a><span class="fu">## Poda de las reglas de asociación</span></span>
<span id="cb46-317"><a href="#cb46-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-320"><a href="#cb46-320" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-321"><a href="#cb46-321" aria-hidden="true" tabindex="-1"></a><span class="do">## ----what influenced purchase of sugar-----------------------------------</span></span>
<span id="cb46-322"><a href="#cb46-322" aria-hidden="true" tabindex="-1"></a>sugar_rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.009</span>, <span class="at">conf =</span> <span class="fl">0.8</span>), </span>
<span id="cb46-323"><a href="#cb46-323" aria-hidden="true" tabindex="-1"></a>  <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default =</span> <span class="st">"lhs"</span>, <span class="at">rhs =</span> <span class="st">"SUGAR"</span>)) </span>
<span id="cb46-324"><a href="#cb46-324" aria-hidden="true" tabindex="-1"></a>rules_sugar <span class="ot">&lt;-</span> <span class="fu">sort</span>(sugar_rules, <span class="at">by =</span> <span class="st">"confidence"</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-325"><a href="#cb46-325" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules_sugar)</span>
<span id="cb46-326"><a href="#cb46-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-327"><a href="#cb46-327" aria-hidden="true" tabindex="-1"></a><span class="do">## ----what purchases did sugar influence----------------------------------</span></span>
<span id="cb46-328"><a href="#cb46-328" aria-hidden="true" tabindex="-1"></a>sugar_rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(basket_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.009</span>, <span class="at">conf =</span> <span class="fl">0.8</span>), </span>
<span id="cb46-329"><a href="#cb46-329" aria-hidden="true" tabindex="-1"></a>  <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default =</span> <span class="st">"rhs"</span>, <span class="at">lhs =</span> <span class="st">"SUGAR"</span>)) </span>
<span id="cb46-330"><a href="#cb46-330" aria-hidden="true" tabindex="-1"></a>rules_sugar <span class="ot">&lt;-</span> <span class="fu">sort</span>(sugar_rules, <span class="at">by =</span> <span class="st">"confidence"</span>, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-331"><a href="#cb46-331" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules_sugar)</span>
<span id="cb46-332"><a href="#cb46-332" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-333"><a href="#cb46-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-334"><a href="#cb46-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-335"><a href="#cb46-335" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualización de reglas</span></span>
<span id="cb46-336"><a href="#cb46-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-337"><a href="#cb46-337" aria-hidden="true" tabindex="-1"></a>:::panel-tabset</span>
<span id="cb46-338"><a href="#cb46-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-339"><a href="#cb46-339" aria-hidden="true" tabindex="-1"></a><span class="fu">## R</span></span>
<span id="cb46-340"><a href="#cb46-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-343"><a href="#cb46-343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-344"><a href="#cb46-344" aria-hidden="true" tabindex="-1"></a><span class="do">## ----plot rules----------------------------------------------------------</span></span>
<span id="cb46-345"><a href="#cb46-345" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(basket_rules)</span>
<span id="cb46-346"><a href="#cb46-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-347"><a href="#cb46-347" aria-hidden="true" tabindex="-1"></a><span class="do">## ----plot rules----------------------------------------------------------</span></span>
<span id="cb46-348"><a href="#cb46-348" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(top_rules, <span class="at">method =</span> <span class="st">"graph"</span>, <span class="at">engine =</span> <span class="st">"igraph"</span>)</span>
<span id="cb46-349"><a href="#cb46-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-350"><a href="#cb46-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-351"><a href="#cb46-351" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-352"><a href="#cb46-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-353"><a href="#cb46-353" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>